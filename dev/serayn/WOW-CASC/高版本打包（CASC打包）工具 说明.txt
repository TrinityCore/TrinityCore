来源:
https://uiwow.com/thread-4268-1-1.html?_dsign=bd1fa542


本帖最后由 serayn 于 2019-7-10 20:35 编辑


这是一个划时代的产品。
在这之前，高版本WOW的客户端是无懈可击的，无解的。为了魔改客户端，只能破解wow.exe绕开校验，但是就算这样，在8.x时代开始，这条路已经走不通了——wow.exe已经加密得无懈可击，无法破解，只能用第三方软件打开它，勉强在内存中破解。
所以在Leg时代开始，我们逐渐找不到和谐补丁，找不到登录画面替换，找不到种族替换等各种信息……仿佛客户端就是只读的那样。

但是这两个工具的出现，划破了旧时代的帷幕，划开了新时代的希望。

CASCHost
介绍：这是一个客户端打包工具。他的工作方式不再是mpqeditor那么简单，而是模拟暴雪的更新服务器，提供客户端更新服务（也就是玩高版本时经常看到那个绿色的小圈圈），通过这样的方法，把魔改的内容“更新”进去。
所以使用它，本质上就是架设一个更新服务的服务器。

使用方法：
1.解压缩CASCHost，编辑里面的appsettings.json。用文本文件打开就好，相关的说明已经写在里面了。
2.编辑hosting.json，把里面的"5100"改为你的喜欢的端口。如果你只是单机用，改完就可以了。如果你希望架设对外开放的更新服务器，那么就还需要在其中加入你的服务器的域名和端口，记得用分号隔开。
3.把魔改的文件放在wwwroot\data文件夹中，把你的客户端的.build.info文件放在wwwroot\SystemFiles文件夹中。
4.运行“开始.bat”，即可开始提供服务。
注意：开始之后会自动下载相应的密钥文件，但是，目前只有较新的版本（815及之后的版本）的密钥文件能直接下载到，更早的版本会下载失败的。
如果你需要架设更早的服务器，你可能需要去wow.tool里面找到一部分密钥的资料（但是不全面）。而剩下的部分，就得自己想办法了。之前我找不到密钥的时候打听过，有人开价6000元提供密钥给我。考虑到这已经是一个行业，而且我为了表达对这一行业的尊重，就不分享相关密钥了。只能说，建议趁还能下载时，及早下载并备份好相关密钥文件。
这个世界上，有一个人备份了从wod到820的所有密钥文件和下载文件。这个人是marlamin，就是wow.tools的主人。如果实在找不到需要的密钥，也许可以发邮件问问他marlamin@marlamin.com。他说过可以找他的……


而且，事情还没有结束
5.用二进制编辑器wow.exe，搜http:，找到带有versions（或者version，或者vers）的行和带有cdns的行，替换成为http://你的域名（如果是单机就localhost，但是不能输入ip）:你的端口/versions， 和http://你的域名（如果是单机就localhost，但是不能输入ip）:你的端口/cdns
**警告：只能是替换，不能是删除后插入。只要有哪怕只有1位的差异，这个wow.exe都会报废。
6.把客户端的.build.info文件搬走，运行wow.exe，即可连接你的服务器开始更新。

BuildBackup
介绍：wow.exe是被设计成为能够放在一个空文件夹里，只运行wow.exe就能把一切东西安装好的。但是样做这需要一个CDN服务器。而CDN服务器的一般用法，则是用来在客户端受损时自动修复客户端使用。如同暴雪不会永远保存所有版本的密钥那样，暴雪也不会保存所有版本客户端的CDN，那么模拟器建设者大概就需要有自己的CDN备份。BuildBackup就是建立CDN备份用的东西。而用BuildBackup收集得到的CDN备份架设的CDN服务器，能成为上面CASCHost的后备支持。也就是说BuildBackup+CASCHost = 完全掌握一个版本的客户端。

使用方法：
1.打开你的客户端的.build.info文件，找到里面的第二行。然后在以“|”为界限划分的诸多格子中，复制第三格的内容和第四格的内容到另外的地方备用
2.解压缩文件后，编辑start.bat，在
dotnet BuildBackup.dll forcebuild wow d3192b18729bb6f00c595fd37097c19f d4bd153ea2b84bcdd3188e9e3c1bf4e3
这行里面，用第三格的内容替换第一串字符，用第四格的内容替换第二串字符。
3.保存，运行start.bat
正常的话，接下来就会自动下载相应的东西，直到把暴雪的CDN服务器掏空为止。一套815的CDN大概200G左右。
不过，比较旧的客户端的CDN是已经撤回了的，用这个工具是再也下载不到的了。如果你想找旧版本的客户端的全套CDN，我所知道全世界至少还有一个人有可能有：marlamin。他的邮箱在上文CASCHost描述中已经有提到了。

备注：
以上这两个工具，都依赖.netcore 2.0-2.2支持（具体是2.0还是2.2忘记了，都装上就没错），注意，不是.netframework，而是.netcore，另一种东西。

下载：
CASCHost下载：  CASCHost.rar (933.1 KB, 下载次数: 89)
BuildBackup下载：  BuildBackup.rar (62.43 KB, 下载次数: 61)

本帖不设回复可见，希望大家能方便自由地在回帖中讨论遇到的问题，和分享经验。
