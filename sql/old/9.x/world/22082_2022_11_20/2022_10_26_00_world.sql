SET @CGUID := 850675;
SET @OGUID := 501833;
SET @PATH := (@CGUID+15) * 10;

DELETE FROM `creature` WHERE `guid` BETWEEN @CGUID+0 AND @CGUID+29;
INSERT INTO `creature` (`guid`, `id`, `map`, `zoneId`, `areaId`, `spawnDifficulties`, `PhaseId`, `PhaseGroup`, `modelid`, `equipment_id`, `position_x`, `position_y`, `position_z`, `orientation`, `spawntimesecs`, `wander_distance`, `currentwaypoint`, `curhealth`, `curmana`, `MovementType`, `npcflag`, `unit_flags`, `dynamicflags`, `VerifiedBuild`) VALUES
(@CGUID+0, 120788, 0, 1519, 6292, '0', '8480', 0, 0, 0, -8379.25390625, 324.5694580078125, 147.097137451171875, 2.244301795959472656, 120, 0, 0, 2747400, 90350, 0, 0, 0, 0, 45745),
(@CGUID+1, 139642, 0, 1519, 6292, '0', '8480', 0, 0, 0, -8384.17578125, 324.173614501953125, 147.097137451171875, 0.922232449054718017, 120, 0, 0, 4579, 0, 0, 0, 0, 0, 45745),
(@CGUID+2, 139636, 0, 1519, 6292, '0', '8480', 0, 0, 1, -8382.1494140625, 324.291656494140625, 147.097137451171875, 0.996521830558776855, 120, 0, 0, 91580, 0, 0, 0, 0, 0, 45745),
(@CGUID+3, 120590, 0, 1519, 6292, '0', '10560', 0, 0, 1, -8383.2724609375, 329.513885498046875, 147.097137451171875, 5.626650333404541015, 120, 0, 0, 2930400, 381200, 0, 0, 0, 0, 45745),
(@CGUID+4, 120756, 0, 1519, 6292, '0', '8480', 0, 0, 1, -8379.5361328125, 328.369781494140625, 147.097137451171875, 3.871367931365966796, 120, 0, 0, 5494800, 451750, 0, 0, 0, 0, 45745),
(@CGUID+5, 120594, 0, 1519, 6292, '0', '8480', 0, 0, 1, -8406.5048828125, 313.020843505859375, 147.09710693359375, 0.701331198215484619, 120, 0, 0, 45790, 0, 0, 0, 0, 0, 45745),
(@CGUID+6, 120599, 0, 1519, 6292, '0', '8480', 0, 0, 1, -8376.34375, 320.470489501953125, 147.097137451171875, 2.24308633804321289, 120, 0, 0, 45790, 0, 0, 0, 0, 0, 45745),
(@CGUID+7, 120594, 0, 1519, 6292, '0', '8480', 0, 0, 1, -8400.7744140625, 306.189239501953125, 147.097137451171875, 0.771616816520690917, 120, 0, 0, 45790, 0, 0, 0, 0, 0, 45745),
(@CGUID+8, 120597, 0, 1519, 6292, '0', '8480', 0, 0, 1, -8375.3232421875, 321.711822509765625, 147.097137451171875, 2.500594854354858398, 120, 0, 0, 68685, 0, 0, 0, 0, 0, 45745),
(@CGUID+9, 120594, 0, 1519, 6292, '0', '8480', 0, 0, 1, -8353.7861328125, 260.640625, 155.4304962158203125, 4.010959148406982421, 120, 0, 0, 45790, 0, 0, 0, 0, 0, 45745),
(@CGUID+10, 120599, 0, 1519, 6292, '0', '8480', 0, 0, 1, -8376.3232421875, 317.140625, 147.097137451171875, 2.454428434371948242, 120, 0, 0, 45790, 0, 0, 0, 0, 0, 45745),
(@CGUID+11, 120599, 0, 1519, 6292, '0', '8480', 0, 0, 1, -8373.044921875, 319.69964599609375, 147.097137451171875, 2.473342657089233398, 120, 0, 0, 45790, 0, 0, 0, 0, 0, 45745),
(@CGUID+12, 120594, 0, 1519, 6292, '0', '8480', 0, 0, 1, -8354.4736328125, 262.921875, 155.4304962158203125, 4.074216842651367187, 120, 0, 0, 45790, 0, 0, 0, 0, 0, 45745),
(@CGUID+13, 1756, 0, 1519, 6292, '0', '8480', 0, 0, 1, -8289.51953125, 257.639007568359375, 155.430328369140625, 5.427973747253417968, 120, 0, 0, 23582, 0, 0, 0, 0, 0, 45745),
(@CGUID+14, 1756, 0, 1519, 6292, '0', '8480', 0, 0, 1, -8296.919921875, 251.680999755859375, 155.430328369140625, 5.340707302093505859, 120, 0, 0, 23582, 0, 0, 0, 0, 0, 45745),
(@CGUID+15, 1756, 0, 1519, 6292, '0', '8480', 0, 0, 1, -8416.04, 300.311, 147.0852, 2.24143, 120, 0, 0, 23582, 0, 2, 0, 0, 0, 45745),
(@CGUID+16, 1756, 0, 1519, 6292, '0', '8480', 0, 0, 1, -8396.7900390625, 282.2030029296875, 151.3663330078125, 3.787364482879638671, 120, 0, 0, 23582, 0, 0, 0, 0, 0, 45745),
(@CGUID+17, 1756, 0, 1519, 6292, '0', '8480', 0, 0, 1, -8404.330078125, 276.24798583984375, 151.3563232421875, 0.715584993362426757, 120, 0, 0, 23582, 0, 0, 0, 0, 0, 45745),
(@CGUID+18, 1756, 0, 1519, 6292, '0', '8480', 0, 0, 1, -8407.73046875, 300.519012451171875, 147.0973358154296875, 2.234021425247192382, 120, 0, 0, 23582, 0, 0, 0, 0, 0, 45745),
(@CGUID+19, 1756, 0, 1519, 6292, '0', '8480', 0, 0, 1, -8413.080078125, 307.281005859375, 147.0973358154296875, 5.410520553588867187, 120, 0, 0, 23582, 0, 0, 0, 0, 0, 45745),
(@CGUID+20, 1756, 0, 1519, 6292, '0', '8480', 0, 0, 1, -8427.5400390625, 320.60198974609375, 145.370330810546875, 3.787364482879638671, 120, 0, 0, 23582, 0, 0, 0, 0, 0, 45745),
(@CGUID+21, 1756, 0, 1519, 6292, '0', '8480', 0, 0, 1, -8434.7802734375, 315.032989501953125, 145.3553314208984375, 0.680678427219390869, 120, 0, 0, 23582, 0, 0, 0, 0, 0, 45745),
(@CGUID+22, 120590, 0, 1519, 4411, '0', '10559', 0, 0, 1, -8281.763671875, 1326.8629150390625, 5.322724342346191406, 3.288783788681030273, 120, 0, 0, 2930400, 381200, 0, 0, 0, 0, 45745),
(@CGUID+23, 144378, 0, 1519, 4411, '0', '10559', 0, 0, 0, -8251.8525390625, 1303.595458984375, 27.452606201171875, 2.772567033767700195, 120, 0, 0, 4579, 0, 0, 0, 0, 0, 45745),
(@CGUID+24, 144378, 0, 1519, 4411, '0', '10559', 0, 0, 0, -8264.267578125, 1338.9444580078125, 18.7614593505859375, 3.158644914627075195, 120, 0, 0, 4579, 0, 0, 0, 0, 0, 45745),
(@CGUID+25, 144378, 0, 1519, 4411, '0', '10559', 0, 0, 0, -8235.138671875, 1334.890625, 18.78497314453125, 1.481357812881469726, 120, 0, 0, 4579, 0, 0, 0, 0, 0, 45745),
(@CGUID+26, 144378, 0, 1519, 4411, '0', '10559', 0, 0, 0, -8263.6962890625, 1359.6353759765625, 18.80169677734375, 1.417557001113891601, 120, 0, 0, 4579, 0, 0, 0, 0, 0, 45745),
(@CGUID+27, 144378, 0, 1519, 4411, '0', '10559', 0, 0, 0, -8234.0693359375, 1337.0191650390625, 18.61983680725097656, 4.112024784088134765, 120, 0, 0, 4579, 0, 0, 0, 0, 0, 45745),
(@CGUID+28, 144378, 0, 1519, 4411, '0', '10559', 0, 0, 0, -8237.67578125, 1369.9010009765625, 23.27885055541992187, 3.236135482788085937, 120, 0, 0, 4579, 0, 0, 0, 0, 0, 45745),
(@CGUID+29, 144378, 0, 1519, 4411, '0', '10559', 0, 0, 0, -8240, 1369.35595703125, 23.27885055541992187, 0.605468630790710449, 120, 0, 0, 4579, 0, 0, 0, 0, 0, 45745);

DELETE FROM `creature_addon` WHERE `guid` BETWEEN @CGUID+0 AND @CGUID+29;
INSERT INTO `creature_addon` (`guid`, `path_id`, `mount`, `bytes1`, `bytes2`, `emote`, `aiAnimKit`, `movementAnimKit`, `meleeAnimKit`, `visibilityDistanceType`, `auras`) VALUES
(@CGUID+0, 0, 0, 0, 256, 0, 0, 0, 0, 0, ''),
(@CGUID+1, 0, 0, 8, 1, 0, 0, 0, 0, 0, ''),
(@CGUID+2, 0, 0, 0, 0, 0, 0, 0, 0, 0, ''),
(@CGUID+3, 0, 0, 0, 0, 0, 0, 0, 0, 0, ''),
(@CGUID+4, 0, 0, 0, 256, 0, 0, 0, 0, 0, ''),
(@CGUID+5, 0, 0, 0, 256, 714, 0, 0, 0, 0, ''),
(@CGUID+6, 0, 0, 0, 256, 0, 0, 0, 0, 0, ''),
(@CGUID+7, 0, 0, 0, 256, 714, 0, 0, 0, 0, ''),
(@CGUID+8, 0, 0, 0, 256, 0, 0, 0, 0, 0, ''),
(@CGUID+9, 0, 0, 0, 256, 714, 0, 0, 0, 0, ''),
(@CGUID+10, 0, 0, 0, 256, 0, 0, 0, 0, 0, ''),
(@CGUID+11, 0, 0, 0, 256, 0, 0, 0, 0, 0, ''),
(@CGUID+12, 0, 0, 0, 256, 0, 0, 0, 0, 0, '240406'),
(@CGUID+13, 0, 0, 0, 257, 0, 0, 0, 0, 0, ''),
(@CGUID+14, 0, 0, 0, 257, 0, 0, 0, 0, 0, ''),
(@CGUID+15, @PATH, 0, 0, 257, 0, 0, 0, 0, 0, ''),
(@CGUID+16, 0, 0, 0, 257, 0, 0, 0, 0, 0, ''),
(@CGUID+17, 0, 0, 0, 257, 0, 0, 0, 0, 0, ''),
(@CGUID+18, 0, 0, 0, 257, 0, 0, 0, 0, 0, ''),
(@CGUID+19, 0, 0, 0, 257, 0, 0, 0, 0, 0, ''),
(@CGUID+20, 0, 0, 0, 257, 0, 0, 0, 0, 0, ''),
(@CGUID+21, 0, 0, 0, 257, 0, 0, 0, 0, 0, ''),
(@CGUID+22, 0, 0, 0, 0, 0, 0, 0, 0, 0, ''),
(@CGUID+23, 0, 0, 0, 1, 69, 0, 0, 0, 0, ''),
(@CGUID+24, 0, 0, 0, 0, 714, 0, 0, 0, 0, ''),
(@CGUID+25, 0, 0, 0, 0, 0, 0, 0, 0, 0, ''),
(@CGUID+26, 0, 0, 0, 1, 69, 0, 0, 0, 0, ''),
(@CGUID+27, 0, 0, 0, 0, 0, 0, 0, 0, 0, ''),
(@CGUID+28, 0, 0, 0, 0, 0, 0, 0, 0, 0, ''),
(@CGUID+29, 0, 0, 0, 0, 0, 0, 0, 0, 0, '');

DELETE FROM `waypoint_data` WHERE `id`= @PATH;
INSERT INTO `waypoint_data` (`id`, `point`, `position_x`, `position_y`, `position_z`, `orientation`, `delay`) VALUES
(@PATH, 0, -8416.04, 300.311, 147.0852, NULL, 0),
(@PATH, 1, -8401.91, 311.34, 147.0852, NULL, 0),
(@PATH, 2, -8399.65, 329.141, 147.0852, NULL, 0),
(@PATH, 3, -8381.1, 327.168, 147.1396, NULL, 0),
(@PATH, 4, -8383.38, 308.866, 147.1751, NULL, 12988),
(@PATH, 5, -8409.74, 292.457, 147.4133, NULL, 0),
(@PATH, 6, -8389.67, 267.035, 155.4914, NULL, 0),
(@PATH, 7, -8391.11, 265.944, 155.3515, NULL, 0),
(@PATH, 8, -8411.21, 291.196, 147.4419, NULL, 0),
(@PATH, 9, -8417.45, 299.0879, 147.0852, NULL, 0),
(@PATH, 10, -8434.2, 321.583, 145.2883, NULL, 0);

DELETE FROM `gameobject` WHERE `guid` BETWEEN @OGUID+0 AND @OGUID+1;
INSERT INTO `gameobject` (`guid`, `id`, `map`, `zoneId`, `areaId`, `spawnDifficulties`, `PhaseId`, `PhaseGroup`, `position_x`, `position_y`, `position_z`, `orientation`, `rotation0`, `rotation1`, `rotation2`, `rotation3`, `spawntimesecs`, `animprogress`, `state`, `VerifiedBuild`) VALUES
(@OGUID+0, 289321, 0, 1519, 6292, '0', '8480', 0, -8381.0595703125, 327.102447509765625, 147.0138092041015625, 3.806018352508544921, 0, 0, -0.94532299041748046, 0.326135605573654174, 120, 255, 1, 45745),
(@OGUID+1, 281874, 0, 1519, 4411, '0', '10559', 0, -8245.81640625, 1331.0625, -3.08908772468566894, 4.750496864318847656, 0, 0, -0.69350624084472656, 0.720450639724731445, 120, 255, 1, 45745);

DELETE FROM `creature_equip_template` WHERE `CreatureID` IN (120597, 120594, 120599, 120756, 139636);
INSERT INTO `creature_equip_template` (`CreatureID`, `ID`, `ItemID1`, `AppearanceModID1`, `ItemVisual1`, `ItemID2`, `AppearanceModID2`, `ItemVisual2`, `ItemID3`, `AppearanceModID3`, `ItemVisual3`, `VerifiedBuild`) VALUES
(120597, 1, 3364, 0, 0, 52525, 0, 0, 110179, 0, 0, 45745),
(120594, 1, 12890, 0, 0, 79347, 0, 0, 0, 0, 0, 45745),
(120599, 1, 3197, 0, 0, 0, 0, 0, 52052, 0, 0, 45745),
(120756, 1, 152482, 0, 0, 0, 0, 0, 0, 0, 0, 45745),
(139636, 1, 47104, 0, 0, 47104, 0, 0, 0, 0, 0, 45745);

UPDATE `creature_template` SET `minlevel` = 50, `maxlevel` = 50 WHERE `entry` IN (120788, 139642, 139636, 120756, 120594, 120599, 120597, 144378);
UPDATE `creature_template` SET `minlevel` = 53, `maxlevel` = 53 WHERE `entry` = 120590;

DELETE FROM `gameobject_template_addon` WHERE `entry` IN (281874, 289321);
INSERT INTO `gameobject_template_addon` (`entry`, `faction`, `flags`, `WorldEffectID`, `AIAnimKitID`) VALUES
(281874, 0, 1048608, 0, 0),
(289321, 0, 8192, 0, 0);

DELETE FROM `phase_name` WHERE `ID` IN (8480, 10560, 10559);
INSERT INTO `phase_name` (`ID`, `Name`) VALUES
(8480, 'Stormwind Keep - War Council (Tides of War)'),
(10560, 'Cosmetic - Stormwind Keep - See Jaina Proudmoore'),
(10559, 'Cosmetic - Stormwind Harbor - See Jaina Proudmoore and Jaina\'s Ship');

DELETE FROM `phase_area` WHERE `AreaId` IN (6292, 1519) AND `PhaseId` IN (8480, 10560, 10559);
INSERT INTO `phase_area` (`AreaId`, `PhaseId`, `Comment`) VALUES
(6292, 10560, 'See Jaina Proudmoore (Tides of War)'),
(6292, 8480, 'See War Council for Tides of War quest in Stormwind Keep'),
(1519, 10559, 'See Jaina Proudmoore (The Nation of Kul Tiras)');

DELETE FROM `conditions` WHERE (`SourceTypeOrReferenceId`=26 AND `SourceGroup` IN (16013, 16785, 8480, 10560, 10559)  AND `SourceEntry` IN (1519, 6292));
INSERT INTO `conditions` (`SourceTypeOrReferenceId`, `SourceGroup`, `SourceEntry`, `SourceId`, `ElseGroup`, `ConditionTypeOrReference`, `ConditionTarget`, `ConditionValue1`, `ConditionValue2`, `ConditionValue3`, `NegativeCondition`, `Comment`) VALUES
-- Stormwind Keep phase
(26, 16013, 1519, 0, 0, 47, 0, 46727, 2 | 8 | 64, 0, 1, 'Apply Phase 16013 if Quest 46727 is not taken | complete | rewarded'),
(26, 16013, 1519, 0, 1, 47, 0, 46728, 2 | 64, 0, 0, 'Apply Phase 16013 if Quest 46728 is complete | rewarded'),
-- Stormwind Keep Turalyon phase
(26, 16785, 6292, 0, 0, 47, 0, 46727, 2 | 8 | 64, 0, 1, 'Apply Phase 16785 if Quest 46727 is not taken | complete | rewarded'),
(26, 16785, 6292, 0, 1, 47, 0, 46728, 2 | 64, 0, 0, 'Apply Phase 16785 if Quest 46728 is complete | rewarded'),
-- Tides of War phase
(26, 8480, 6292, 0, 0, 47, 0, 46727, 2 | 8 | 64, 0, 0,  'Apply Phase 8480 if Quest 46727 is taken | complete | rewarded'),
(26, 8480, 6292, 0, 0, 47, 0, 46728, 2 | 64, 0, 1, 'Apply Phase 8480 if Quest 46728 is not complete | rewarded'),
-- Jaina Proudmoore Stormwind Keep phase
(26, 10560, 6292, 0, 0, 47, 0, 46727, 2 | 8 | 64, 0, 0, 'Apply Phase 10560 if Quest 46727 is taken | complete | rewarded'),
(26, 10560, 6292, 0, 0, 47, 0, 46728, 2 | 8 | 64, 0, 1, 'Apply Phase 10560 if Quest 46728 is not in Progress | complete | rewarded'),
-- Jaina Proudmoore Stormwind Harbor phase
(26, 10559, 1519, 0, 0, 47, 0, 46728, 8, 0, 0, 'Apply Phase 10559 if Quest 46728 is taken');
