--
DELETE FROM `smart_scripts` WHERE `entryorguid` = 23777 AND `source_type` = 0;
INSERT INTO `smart_scripts` (`entryorguid`,`source_type`,`id`,`link`,`event_type`,`event_phase_mask`,`event_chance`,`event_flags`,`event_param1`,`event_param2`,`event_param3`,`event_param4`,`event_param5`,`action_type`,`action_param1`,`action_param2`,`action_param3`,`action_param4`,`action_param5`,`action_param6`,`target_type`,`target_param1`,`target_param2`,`target_param3`,`target_param4`,`target_x`,`target_y`,`target_z`,`target_o`,`comment`) VALUES
(23777,0,0,0,37,0,100,0,0,0,0,0,0,116,7,0,0,0,0,0,1,0,0,0,0,0,0,0,0,"Proto-Drake Egg - On AI Initialize - Set Corpse Delay"),
(23777,0,1,0,37,0,100,0,0,0,0,0,0,8,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,"Proto-Drake Egg - On AI Initialize - Set Reactstate Passive"),
(23777,0,2,3,8,0,100,0,46606,0,0,0,0,11,43160,0,0,0,0,0,1,0,0,0,0,0,0,0,0,"Proto-Drake Egg - On Spellhit 'Tillinghast's Plague Canister Dummy' - Cast 'Green Eggs and Whelps: Summon Plagued Proto-Whelp'"),
(23777,0,3,0,61,0,100,0,0,0,0,0,0,37,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,"Proto-Drake Egg - On Spellhit 'Tillinghast's Plague Canister Dummy' - Kill Self"),
-- Not sure how exactly implement that without messing with phases https://www.wowhead.com/quest=11279/green-eggs-and-whelps#comments:id=525609
-- Keep the old method. It's wrong at least because one-shotting them too should spawn an whelp
-- Also this way you can get two whelps and that should never happen
(23777,0,4,0,4,0,100,0,0,0,0,0,0,22,1,0,0,0,0,0,1,0,0,0,0,0,0,0,0,"Proto-Drake Egg - On Aggro - Set Event Phase 1"),
(23777,0,5,0,6,1,100,0,0,0,0,0,0,11,42404,2,0,0,0,0,1,0,0,0,0,0,0,0,0,"Proto-Drake Egg - On Just Died - Cast 'Proto-Drake Egg: Summon Proto-Whelp' (Phase 1)");

-- 3.3.5 only
DELETE FROM `spell_dbc` WHERE `Id` = 42404;
INSERT INTO `spell_dbc` (`Id`, `Dispel`, `Mechanic`, `Attributes`, `AttributesEx`, `AttributesEx2`, `AttributesEx3`, `AttributesEx4`, `AttributesEx5`, `AttributesEx6`, `AttributesEx7`, `Stances`, `StancesNot`, `Targets`, `CastingTimeIndex`, `AuraInterruptFlags`, `ProcFlags`, `ProcChance`, `ProcCharges`, `MaxLevel`, `BaseLevel`, `SpellLevel`, `DurationIndex`, `RangeIndex`, `StackAmount`, `EquippedItemClass`, `EquippedItemSubClassMask`, `EquippedItemInventoryTypeMask`, `Effect1`, `Effect2`, `Effect3`, `EffectDieSides1`, `EffectDieSides2`, `EffectDieSides3`, `EffectRealPointsPerLevel1`, `EffectRealPointsPerLevel2`, `EffectRealPointsPerLevel3`, `EffectBasePoints1`, `EffectBasePoints2`, `EffectBasePoints3`, `EffectMechanic1`, `EffectMechanic2`, `EffectMechanic3`, `EffectImplicitTargetA1`, `EffectImplicitTargetA2`, `EffectImplicitTargetA3`, `EffectImplicitTargetB1`, `EffectImplicitTargetB2`, `EffectImplicitTargetB3`, `EffectRadiusIndex1`, `EffectRadiusIndex2`, `EffectRadiusIndex3`, `EffectApplyAuraName1`, `EffectApplyAuraName2`, `EffectApplyAuraName3`, `EffectAmplitude1`, `EffectAmplitude2`, `EffectAmplitude3`, `EffectMultipleValue1`, `EffectMultipleValue2`, `EffectMultipleValue3`, `EffectItemType1`, `EffectItemType2`, `EffectItemType3`, `EffectMiscValue1`, `EffectMiscValue2`, `EffectMiscValue3`, `EffectMiscValueB1`, `EffectMiscValueB2`, `EffectMiscValueB3`, `EffectTriggerSpell1`, `EffectTriggerSpell2`, `EffectTriggerSpell3`, `EffectSpellClassMaskA1`, `EffectSpellClassMaskA2`, `EffectSpellClassMaskA3`, `EffectSpellClassMaskB1`, `EffectSpellClassMaskB2`, `EffectSpellClassMaskB3`, `EffectSpellClassMaskC1`, `EffectSpellClassMaskC2`, `EffectSpellClassMaskC3`, `SpellName`, `MaxTargetLevel`, `SpellFamilyName`, `SpellFamilyFlags1`, `SpellFamilyFlags2`, `SpellFamilyFlags3`, `MaxAffectedTargets`, `DmgClass`, `PreventionType`, `DmgMultiplier1`, `DmgMultiplier2`, `DmgMultiplier3`, `AreaGroupId`, `SchoolMask`) VALUES
(42404,0,0,256,0,0,0,0,0,0,0,0,0,0,1,0,0,101,0,0,0,0,4,1,0,-1,0,0,28,0,0,1,0,0,0,0,0,0,0,0,0,0,0,18,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,23688,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,'Proto-Drake Egg: Summon Proto-Whelp',0,0,0,0,0,0,0,0,1,0,0,0,1);
