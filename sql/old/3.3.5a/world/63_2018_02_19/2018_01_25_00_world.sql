-- SpawnGroupMapper auto-generated SQL for map 550 (Tempest Keep)

-- Constant setter section - adjust this
-- spawn_group_template (4 entries)
SET @FIRSTGROUPID := 44;
-- Boss state associations
SET @ALAR := 1; -- boss state that controls group "Al'ar"
SET @VOIDREAVER := 3; -- boss state that controls group "Void Reaver"
SET @SOLARIAN := 2; -- boss state that controls group "Solarian"
SET @KAELTHAS := 0; -- boss state that controls group "Kael'thas"

-- DB modification section - you shouldn't need to touch this
-- Insert spawn group templates
DELETE FROM `spawn_group_template` WHERE `groupId` BETWEEN @FIRSTGROUPID+0 AND @FIRSTGROUPID+3;
INSERT INTO `spawn_group_template` (`groupId`,`groupName`,`groupFlags`) VALUES
    (@FIRSTGROUPID+0, "Tempest Keep - Al'ar", 0x04),
    (@FIRSTGROUPID+1, "Tempest Keep - Void Reaver", 0x04),
    (@FIRSTGROUPID+2, "Tempest Keep - Solarian", 0x04),
    (@FIRSTGROUPID+3, "Tempest Keep - Kael'thas", 0x04);

-- Insert spawn group data
DELETE FROM `spawn_group` WHERE `groupId` BETWEEN @FIRSTGROUPID+0 AND @FIRSTGROUPID+3;
INSERT INTO `spawn_group` (`groupId`,`spawnType`,`spawnId`) VALUES
    (@FIRSTGROUPID+2, 0, 12524),
    (@FIRSTGROUPID+3, 0, 86952),
    (@FIRSTGROUPID+2, 0, 12532),
    (@FIRSTGROUPID+2, 0, 12534),
    (@FIRSTGROUPID+2, 0, 12536),
    (@FIRSTGROUPID+2, 0, 12538),
    (@FIRSTGROUPID+2, 0, 12540),
    (@FIRSTGROUPID+2, 0, 12542),
    (@FIRSTGROUPID+1, 0, 12550),
    (@FIRSTGROUPID+1, 0, 12552),
    (@FIRSTGROUPID+1, 0, 12554),
    (@FIRSTGROUPID+1, 0, 12556),
    (@FIRSTGROUPID+1, 0, 12558),
    (@FIRSTGROUPID+1, 0, 12564),
    (@FIRSTGROUPID+1, 0, 12566),
    (@FIRSTGROUPID+3, 0, 12568),
    (@FIRSTGROUPID+3, 0, 12570),
    (@FIRSTGROUPID+0, 0, 554),
    (@FIRSTGROUPID+3, 0, 144136),
    (@FIRSTGROUPID+3, 0, 144105),
    (@FIRSTGROUPID+3, 0, 144137),
    (@FIRSTGROUPID+3, 0, 86939),
    (@FIRSTGROUPID+3, 0, 144106),
    (@FIRSTGROUPID+3, 0, 144138),
    (@FIRSTGROUPID+3, 0, 7987),
    (@FIRSTGROUPID+3, 0, 144107),
    (@FIRSTGROUPID+3, 0, 144139),
    (@FIRSTGROUPID+3, 0, 86941),
    (@FIRSTGROUPID+3, 0, 86940),
    (@FIRSTGROUPID+3, 0, 144110),
    (@FIRSTGROUPID+3, 0, 144108),
    (@FIRSTGROUPID+3, 0, 144140),
    (@FIRSTGROUPID+2, 0, 12467),
    (@FIRSTGROUPID+3, 0, 144146),
    (@FIRSTGROUPID+2, 0, 12411),
    (@FIRSTGROUPID+2, 0, 12413),
    (@FIRSTGROUPID+2, 0, 12415),
    (@FIRSTGROUPID+3, 0, 144109),
    (@FIRSTGROUPID+2, 0, 12419),
    (@FIRSTGROUPID+2, 0, 12421),
    (@FIRSTGROUPID+2, 0, 12423),
    (@FIRSTGROUPID+2, 0, 12425),
    (@FIRSTGROUPID+2, 0, 12427),
    (@FIRSTGROUPID+2, 0, 12429),
    (@FIRSTGROUPID+2, 0, 12431),
    (@FIRSTGROUPID+0, 0, 12433),
    (@FIRSTGROUPID+0, 0, 12435),
    (@FIRSTGROUPID+0, 0, 12437),
    (@FIRSTGROUPID+0, 0, 12439),
    (@FIRSTGROUPID+0, 0, 12441),
    (@FIRSTGROUPID+0, 0, 12443),
    (@FIRSTGROUPID+0, 0, 12445),
    (@FIRSTGROUPID+0, 0, 12447),
    (@FIRSTGROUPID+0, 0, 12449),
    (@FIRSTGROUPID+0, 0, 12451),
    (@FIRSTGROUPID+0, 0, 12453),
    (@FIRSTGROUPID+0, 0, 12455),
    (@FIRSTGROUPID+1, 0, 12461),
    (@FIRSTGROUPID+3, 0, 12463),
    (@FIRSTGROUPID+3, 0, 144144),
    (@FIRSTGROUPID+2, 0, 12469),
    (@FIRSTGROUPID+2, 0, 12471),
    (@FIRSTGROUPID+2, 0, 12473),
    (@FIRSTGROUPID+0, 0, 12475),
    (@FIRSTGROUPID+2, 0, 12477),
    (@FIRSTGROUPID+0, 0, 12479),
    (@FIRSTGROUPID+3, 0, 144145),
    (@FIRSTGROUPID+0, 0, 12485),
    (@FIRSTGROUPID+0, 0, 12487),
    (@FIRSTGROUPID+2, 0, 12489),
    (@FIRSTGROUPID+2, 0, 12491),
    (@FIRSTGROUPID+3, 0, 86943),
    (@FIRSTGROUPID+2, 0, 12495),
    (@FIRSTGROUPID+2, 0, 12497),
    (@FIRSTGROUPID+2, 0, 12499),
    (@FIRSTGROUPID+2, 0, 12501),
    (@FIRSTGROUPID+2, 0, 12503),
    (@FIRSTGROUPID+2, 0, 12505),
    (@FIRSTGROUPID+2, 0, 12507),
    (@FIRSTGROUPID+2, 0, 12509),
    (@FIRSTGROUPID+2, 0, 12511),
    (@FIRSTGROUPID+3, 0, 144147),
    (@FIRSTGROUPID+2, 0, 12517),
    (@FIRSTGROUPID+2, 0, 12519),
    (@FIRSTGROUPID+2, 0, 12521),
    (@FIRSTGROUPID+2, 0, 12523),
    (@FIRSTGROUPID+3, 0, 86944),
    (@FIRSTGROUPID+2, 0, 12527),
    (@FIRSTGROUPID+3, 0, 144148),
    (@FIRSTGROUPID+2, 0, 12533),
    (@FIRSTGROUPID+2, 0, 12535),
    (@FIRSTGROUPID+2, 0, 12537),
    (@FIRSTGROUPID+2, 0, 12539),
    (@FIRSTGROUPID+2, 0, 12541),
    (@FIRSTGROUPID+3, 0, 12543),
    (@FIRSTGROUPID+3, 0, 144149),
    (@FIRSTGROUPID+1, 0, 12549),
    (@FIRSTGROUPID+1, 0, 12551),
    (@FIRSTGROUPID+1, 0, 12553),
    (@FIRSTGROUPID+1, 0, 12555),
    (@FIRSTGROUPID+1, 0, 12557),
    (@FIRSTGROUPID+1, 0, 12559),
    (@FIRSTGROUPID+3, 0, 144150),
    (@FIRSTGROUPID+1, 0, 12565),
    (@FIRSTGROUPID+3, 0, 12567),
    (@FIRSTGROUPID+3, 0, 12569),
    (@FIRSTGROUPID+3, 0, 144141),
    (@FIRSTGROUPID+2, 0, 12513),
    (@FIRSTGROUPID+3, 0, 144151),
    (@FIRSTGROUPID+2, 0, 12515),
    (@FIRSTGROUPID+2, 0, 12529),
    (@FIRSTGROUPID+2, 0, 12526),
    (@FIRSTGROUPID+3, 0, 86946),
    (@FIRSTGROUPID+3, 0, 144152),
    (@FIRSTGROUPID+3, 0, 86951),
    (@FIRSTGROUPID+2, 0, 12531),
    (@FIRSTGROUPID+2, 0, 12530),
    (@FIRSTGROUPID+2, 0, 12528),
    (@FIRSTGROUPID+2, 0, 12525),
    (@FIRSTGROUPID+3, 0, 144153),
    (@FIRSTGROUPID+3, 0, 144142),
    (@FIRSTGROUPID+0, 0, 12480),
    (@FIRSTGROUPID+3, 0, 12465),
    (@FIRSTGROUPID+3, 0, 86947),
    (@FIRSTGROUPID+2, 0, 12493),
    (@FIRSTGROUPID+3, 0, 12544),
    (@FIRSTGROUPID+3, 0, 86945),
    (@FIRSTGROUPID+3, 0, 86953),
    (@FIRSTGROUPID+3, 0, 86942),
    (@FIRSTGROUPID+1, 0, 12462),
    (@FIRSTGROUPID+1, 0, 12562),
    (@FIRSTGROUPID+1, 0, 12561),
    (@FIRSTGROUPID+1, 0, 12563),
    (@FIRSTGROUPID+1, 0, 12560),
    (@FIRSTGROUPID+3, 0, 86948),
    (@FIRSTGROUPID+0, 0, 12450),
    (@FIRSTGROUPID+2, 0, 12430),
    (@FIRSTGROUPID+0, 0, 12434),
    (@FIRSTGROUPID+2, 0, 12410),
    (@FIRSTGROUPID+2, 0, 12412),
    (@FIRSTGROUPID+2, 0, 12414),
    (@FIRSTGROUPID+2, 0, 12416),
    (@FIRSTGROUPID+2, 0, 12418),
    (@FIRSTGROUPID+2, 0, 12420),
    (@FIRSTGROUPID+2, 0, 12422),
    (@FIRSTGROUPID+2, 0, 12424),
    (@FIRSTGROUPID+2, 0, 12426),
    (@FIRSTGROUPID+2, 0, 12428),
    (@FIRSTGROUPID+3, 0, 86949),
    (@FIRSTGROUPID+2, 0, 12432),
    (@FIRSTGROUPID+0, 0, 12436),
    (@FIRSTGROUPID+0, 0, 12438),
    (@FIRSTGROUPID+0, 0, 12440),
    (@FIRSTGROUPID+0, 0, 12442),
    (@FIRSTGROUPID+0, 0, 12444),
    (@FIRSTGROUPID+0, 0, 12446),
    (@FIRSTGROUPID+0, 0, 12448),
    (@FIRSTGROUPID+0, 0, 12452),
    (@FIRSTGROUPID+0, 0, 12454),
    (@FIRSTGROUPID+0, 0, 12456),
    (@FIRSTGROUPID+1, 0, 12458),
    (@FIRSTGROUPID+3, 0, 144143),
    (@FIRSTGROUPID+3, 0, 86950),
    (@FIRSTGROUPID+3, 0, 12464),
    (@FIRSTGROUPID+3, 0, 12466),
    (@FIRSTGROUPID+3, 0, 12468),
    (@FIRSTGROUPID+2, 0, 12470),
    (@FIRSTGROUPID+2, 0, 12472),
    (@FIRSTGROUPID+2, 0, 12474),
    (@FIRSTGROUPID+0, 0, 12476),
    (@FIRSTGROUPID+1, 0, 12478),
    (@FIRSTGROUPID+0, 0, 12484),
    (@FIRSTGROUPID+0, 0, 12486),
    (@FIRSTGROUPID+2, 0, 12488),
    (@FIRSTGROUPID+2, 0, 12490),
    (@FIRSTGROUPID+2, 0, 12492),
    (@FIRSTGROUPID+2, 0, 12494),
    (@FIRSTGROUPID+2, 0, 12496),
    (@FIRSTGROUPID+2, 0, 12498),
    (@FIRSTGROUPID+2, 0, 12500),
    (@FIRSTGROUPID+2, 0, 12502),
    (@FIRSTGROUPID+2, 0, 12504),
    (@FIRSTGROUPID+2, 0, 12506),
    (@FIRSTGROUPID+2, 0, 12508),
    (@FIRSTGROUPID+2, 0, 12510),
    (@FIRSTGROUPID+2, 0, 12512),
    (@FIRSTGROUPID+2, 0, 12514),
    (@FIRSTGROUPID+2, 0, 12516),
    (@FIRSTGROUPID+2, 0, 12518),
    (@FIRSTGROUPID+2, 0, 12520),
    (@FIRSTGROUPID+2, 0, 12522),
    (@FIRSTGROUPID+2, 0, 12417);

-- Link information for instance script
DELETE FROM `instance_spawn_groups` WHERE `instanceMapId` = 550;
INSERT INTO `instance_spawn_groups` (`instanceMapId`, `bossStateId`, `bossStates`, `spawnGroupId`, `flags`) VALUES
    (550,@ALAR,0x17,@FIRSTGROUPID+0,0x1), -- Spawn Al'ar if state is not DONE
    (550,@VOIDREAVER,0x17,@FIRSTGROUPID+1,0x1), -- Spawn Void Reaver if state is not DONE
    (550,@SOLARIAN,0x17,@FIRSTGROUPID+2,0x1), -- Spawn Solarian if state is not DONE
    (550,@KAELTHAS,0x17,@FIRSTGROUPID+3,0x1); -- Spawn Kael'thas if state is not DONE

-- Remove legacy linked_respawn entries
DELETE lr FROM `linked_respawn` lr INNER JOIN `spawn_group` sg ON sg.`groupId` BETWEEN @FIRSTGROUPID+0 AND @FIRSTGROUPID+3 AND sg.`spawnType` = (lr.linkType >> 1) AND sg.`spawnId`=lr.`guid`;
