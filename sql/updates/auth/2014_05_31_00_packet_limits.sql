DROP TABLE IF EXISTS `packet_limits`;

CREATE TABLE IF NOT EXISTS `packet_limits` (
  `opcode` varchar(40) NOT NULL COMMENT 'Opcode name',
  `limit` int(4) NOT NULL COMMENT 'Opcode limit',
  PRIMARY KEY (`opcode`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;

INSERT INTO `packet_limits` (`opcode`, `limit`) VALUES
('CMSG_QUEST_QUERY',5000),
('CMSG_MESSAGECHAT',5000),
('CMSG_ITEM_QUERY_SINGLE',5000),
('CMSG_ITEM_NAME_QUERY',5000),
('CMSG_GAMEOBJECT_QUERY',5000),
('CMSG_NAME_QUERY',5000),
('CMSG_PET_NAME_QUERY',5000),
('CMSG_CREATURE_QUERY',5000),
('CMSG_NPC_TEXT_QUERY',5000),
('CMSG_QUESTGIVER_STATUS_QUERY',5000),
('CMSG_ATTACKSTOP',500),
('CMSG_GUILD_QUERY',500),
('CMSG_ARENA_TEAM_QUERY',500),
('CMSG_TAXINODE_STATUS_QUERY',500),
('CMSG_TAXIQUERYAVAILABLENODES',500),
('CMSG_QUESTGIVER_QUERY_QUEST',500),
('CMSG_QUESTGIVER_STATUS_MULTIPLE_QUERY',500),
('CMSG_QUERY_QUESTS_COMPLETED',500),
('CMSG_QUEST_POI_QUERY',500),
('CMSG_QUERY_TIME',500),
('CMSG_PAGE_TEXT_QUERY',500),
('CMSG_PETITION_QUERY',500),
('CMSG_QUERY_INSPECT_ACHIEVEMENTS',500),
('CMSG_AREA_SPIRIT_HEALER_QUERY',500),
('CMSG_CORPSE_MAP_POSITION_QUERY',500),
('CMSG_MOVE_TIME_SKIPPED',500),
('CMSG_GUILD_BANK_QUERY_TAB',500),
('MSG_GUILD_BANK_LOG_QUERY',500),
('MSG_QUERY_GUILD_BANK_TEXT',500),
('MSG_CORPSE_QUERY',500),
('MSG_QUERY_NEXT_MAIL_TIME',500),
('MSG_GUILD_EVENT_LOG_QUERY',500),
('MSG_MOVE_SET_FACING',500),
('CMSG_INSPECT',500),
('CMSG_REQUEST_PARTY_MEMBER_STATS',50),
('CMSG_WHO',50),
('CMSG_SETSHEATHED',50),
('CMSG_CONTACT_LIST',50),
('CMSG_GUILD_SET_PUBLIC_NOTE',50),
('CMSG_GUILD_SET_OFFICER_NOTE',50),
('CMSG_SPELLCLICK',20),
('CMSG_GAMEOBJ_USE',20),
('CMSG_GAMEOBJ_REPORT_USE',20),
('MSG_RAID_TARGET_UPDATE',20),
('CMSG_QUESTGIVER_COMPLETE_QUEST',20),
('CMSG_PLAYER_VEHICLE_ENTER',20),
('CMSG_PETITION_SIGN',20),
('CMSG_PLAYER_LOGOUT',3),
('CMSG_LOGOUT_REQUEST',3),
('CMSG_LOGOUT_CANCEL',3),
('CMSG_CHANGE_SEATS_ON_CONTROLLED_VEHICLE',3),
('CMSG_REQUEST_VEHICLE_PREV_SEAT',3),
('CMSG_REQUEST_VEHICLE_NEXT_SEAT',3),
('CMSG_REQUEST_VEHICLE_SWITCH_SEAT',3),
('CMSG_TOGGLE_PVP',3),
('CMSG_ADD_FRIEND',3),
('CMSG_DEL_FRIEND',3),
('CMSG_SET_CONTACT_NOTES',3),
('CMSG_RESET_INSTANCES',3),
('CMSG_HEARTH_AND_RESURRECT',3),
('CMSG_CHAR_CREATE',3),
('CMSG_READY_FOR_ACCOUNT_DATA_TIMES',3),
('CMSG_CHAR_ENUM',3),
('CMSG_REALM_SPLIT',3),
('CMSG_CHAR_DELETE',3),
('CMSG_PLAYER_LOGIN',3),
('CMSG_PET_ABANDON',3),
('CMSG_PET_RENAME',3),
('CMSG_CHAR_RENAME',3),
('CMSG_CHAR_CUSTOMIZE',3),
('CMSG_CHAR_RACE_CHANGE',3),
('CMSG_CHAR_FACTION_CHANGE',3),
('CMSG_GMTICKET_CREATE',3),
('CMSG_GMTICKET_UPDATETEXT',3),
('CMSG_GMTICKET_DELETETICKET',3),
('CMSG_GMSURVEY_SUBMIT',3),
('CMSG_GM_REPORT_LAG',3),
('CMSG_BUG',3),
('CMSG_GMRESPONSE_RESOLVE',3),
('CMSG_ACTIVATETAXIEXPRESS',3),
('CMSG_ACTIVATETAXI',3),
('CMSG_SELF_RES',3),
('CMSG_INITIATE_TRADE',3),
('CMSG_BEGIN_TRADE',3),
('CMSG_UNLEARN_SKILL',3),
('CMSG_DISMISS_CONTROLLED_VEHICLE',3),
('CMSG_REQUEST_VEHICLE_EXIT',3),
('CMSG_LEARN_PREVIEW_TALENTS',3),
('CMSG_LEARN_PREVIEW_TALENTS_PET',3),
('CMSG_CONTROLLER_EJECT_PASSENGER',3),
('CMSG_EQUIPMENT_SET_SAVE',3),
('CMSG_DELETEEQUIPMENT_SET',3),
('CMSG_REMOVE_GLYPH',3),
('CMSG_ALTER_APPEARANCE',3),
('CMSG_QUESTGIVER_ACCEPT_QUEST',3),
('CMSG_QUESTGIVER_CHOOSE_REWARD',3),
('CMSG_QUESTGIVER_REQUEST_REWARD',3),
('CMSG_QUESTGIVER_CANCEL',3),
('CMSG_QUESTLOG_REMOVE_QUEST',3),
('CMSG_QUEST_CONFIRM_ACCEPT',3),
('CMSG_DISMISS_CRITTER',3),
('CMSG_REPOP_REQUEST',3),
('CMSG_PETITION_BUY',3),
('CMSG_TURN_IN_PETITION',3),
('CMSG_COMPLETE_CINEMATIC',3),
('CMSG_ITEM_REFUND',3),
('CMSG_SOCKET_GEMS',3),
('CMSG_WRAP_ITEM',3),
('CMSG_BUY_BANK_SLOT',3),
('CMSG_GROUP_ACCEPT',3),
('CMSG_GROUP_DECLINE',3),
('CMSG_GROUP_UNINVITE_GUID',3),
('CMSG_GROUP_UNINVITE',3),
('CMSG_GROUP_SET_LEADER',3),
('CMSG_GROUP_DISBAND',3),
('CMSG_GROUP_RAID_CONVERT',3),
('CMSG_GROUP_CHANGE_SUB_GROUP',3),
('CMSG_GROUP_ASSISTANT_LEADER',3),
('CMSG_OPT_OUT_OF_LOOT',3),
('CMSG_BATTLEMASTER_JOIN_ARENA',3),
('CMSG_LEAVE_BATTLEFIELD',3),
('CMSG_REPORT_PVP_AFK',3),
('CMSG_DUEL_ACCEPTED',3),
('CMSG_DUEL_CANCELLED',3),
('CMSG_CALENDAR_GET_CALENDAR',3),
('CMSG_CALENDAR_ADD_EVENT',3),
('CMSG_CALENDAR_UPDATE_EVENT',3),
('CMSG_CALENDAR_REMOVE_EVENT',3),
('CMSG_CALENDAR_COPY_EVENT',3),
('CMSG_CALENDAR_EVENT_INVITE',3),
('CMSG_CALENDAR_EVENT_SIGNUP',3),
('CMSG_CALENDAR_EVENT_RSVP',3),
('CMSG_CALENDAR_EVENT_REMOVE_INVITE',3),
('CMSG_CALENDAR_EVENT_MODERATOR_STATUS',3),
('CMSG_CALENDAR_COMPLAIN',3),
('CMSG_ARENA_TEAM_INVITE',3),
('CMSG_ARENA_TEAM_ACCEPT',3),
('CMSG_ARENA_TEAM_DECLINE',3),
('CMSG_ARENA_TEAM_LEAVE',3),
('CMSG_ARENA_TEAM_DISBAND',3),
('CMSG_ARENA_TEAM_REMOVE',3),
('CMSG_ARENA_TEAM_LEADER',3),
('CMSG_LOOT_METHOD',3),
('CMSG_GUILD_INVITE',3),
('CMSG_GUILD_ACCEPT',3),
('CMSG_GUILD_DECLINE',3),
('CMSG_GUILD_LEAVE',3),
('CMSG_GUILD_DISBAND',3),
('CMSG_GUILD_LEADER',3),
('CMSG_GUILD_MOTD',3),
('CMSG_GUILD_RANK',3),
('CMSG_GUILD_ADD_RANK',3),
('CMSG_GUILD_DEL_RANK',3),
('CMSG_GUILD_INFO_TEXT',3),
('CMSG_GUILD_BANK_DEPOSIT_MONEY',3),
('CMSG_GUILD_BANK_WITHDRAW_MONEY',3),
('CMSG_GUILD_BANK_BUY_TAB',3),
('CMSG_GUILD_BANK_UPDATE_TAB',3),
('CMSG_SET_GUILD_BANK_TEXT',3),
('MSG_SAVE_GUILD_EMBLEM',3),
('MSG_PETITION_RENAME',3),
('MSG_PETITION_DECLINE',3),
('MSG_TALENT_WIPE_CONFIRM',3),
('MSG_SET_DUNGEON_DIFFICULTY',3),
('MSG_SET_RAID_DIFFICULTY',3),
('MSG_RANDOM_ROLL',3),
('MSG_PARTY_ASSIGNMENT',3),
('MSG_RAID_READY_CHECK',3),
('CMSG_SET_ACTION_BUTTON',144),
('CMSG_ITEM_REFUND_INFO',150);

DELETE FROM `rbac_permissions` WHERE `id` IN (631);
INSERT INTO `rbac_permissions` (`id`, `name`) VALUES
(631, 'Command: reload packet_limits');

DELETE FROM `rbac_linked_permissions` WHERE `linkedId` IN (631);
INSERT INTO `rbac_linked_permissions` (`id`, `linkedId`) VALUES
(196, 631);