SET @GGUID := 200000;
SET @SPAWNGROUPID := 100;

-- 'npc_wg_demolisher_engineer' Gossip stuff
DELETE FROM `conditions` WHERE `SourceTypeOrReferenceId` = 14 AND `SourceGroup` IN (9923, 9904);
DELETE FROM `conditions` WHERE `SourceTypeOrReferenceId` = 15 AND `SourceGroup` IN (9923, 9904);

DELETE FROM `gossip_menu` WHERE `MenuID` = 9904 AND `TextID` IN (13786, 13761);
DELETE FROM `gossip_menu` WHERE `MenuID` = 9923 AND `TextID` IN (13786, 14172);

UPDATE `creature_template` SET `gossip_menu_id` = 0 WHERE `entry` IN (30400, 30499);

-- Remove 'npc_wg_give_promotion_credit'
UPDATE `creature_template` SET `ScriptName` = '' WHERE `ScriptName` = 'npc_wg_give_promotion_credit';

-- Remove 'spell_wintergrasp_force_building' from 'Activate Robotic Arms'
DELETE FROM `spell_script_names` WHERE `spell_id` = 49899 AND `ScriptName` = 'spell_wintergrasp_force_building';

-- Remove spell_area from 56618 - Horde Controls Factory Phase Shift
-- Remove spell_area from 56617 - Alliance Controls Factory Phase Shift
DELETE FROM `spell_area` WHERE `spell` IN (56618, 56617);

-- Add 'spell_wintergrasp_waiting_to_resurrect'
DELETE FROM `spell_script_names` WHERE `ScriptName`='spell_wintergrasp_waiting_to_resurrect';
INSERT INTO `spell_script_names` (`spell_id`, `ScriptName`) VALUES
(2584, 'spell_wintergrasp_waiting_to_resurrect');

-- Gameobject spawns
DELETE FROM `gameobject` WHERE `id` IN (190219,190220,191795,191796,191799,191800,191801,191802,191803,191804,191806,191807,191808,191809,190369,190370,190371,190372,190374,190376,191797,191798,191805,190375,191810) AND `map` = 571;
DELETE FROM `gameobject` WHERE `id` IN (190763, 191575, 192951) AND `map` = 571;
DELETE FROM `gameobject` WHERE `guid` BETWEEN @GGUID AND @GGUID+44;
INSERT INTO `gameobject` (`guid`, `id`, `map`, `zoneId`, `areaId`, `spawnMask`, `phaseMask`, `position_x`, `position_y`, `position_z`, `orientation`, `rotation0`, `rotation1`, `rotation2`, `rotation3`, `spawntimesecs`, `animprogress`, `state`, `VerifiedBuild`) VALUES
-- Fortress walls, interior walls & gates
(@GGUID+00, 190219, 571, 4197, 4575, 1, 193, 5371.457, 3047.472, 407.5710,  3.14159300, 0.0, 0.0, -1.000000000, 0.00000000, 0, 100, 1, 0), -- GO_WINTERGRASP_FORTRESS_WALL_1
(@GGUID+01, 190220, 571, 4197, 4575, 1, 193, 5331.264, 3047.105, 407.9228,  0.05235888, 0.0, 0.0,  0.026176450, 0.99965730, 0, 100, 1, 0), -- GO_WINTERGRASP_FORTRESS_WALL_2
(@GGUID+02, 191795, 571, 4197, 4575, 1, 193, 5385.841, 2909.490, 409.7127,  0.00872424, 0.0, 0.0,  0.004362106, 0.99999050, 0, 100, 1, 0), -- GO_WINTERGRASP_FORTRESS_WALL_9
(@GGUID+03, 191796, 571, 4197, 4575, 1, 193, 5384.452, 2771.835, 410.2704,  3.14159300, 0.0, 0.0, -1.000000000, 0.00000000, 0, 100, 1, 0), -- GO_WINTERGRASP_FORTRESS_WALL_10
(@GGUID+04, 191799, 571, 4197, 4575, 1, 193, 5371.436, 2630.610, 408.8163,  3.13285800, 0.0, 0.0,  0.999990500, 0.00436732, 0, 100, 1, 0), -- GO_WINTERGRASP_FORTRESS_WALL_11
(@GGUID+05, 191800, 571, 4197, 4575, 1, 193, 5301.838, 2909.089, 409.8661,  0.00872424, 0.0, 0.0,  0.004362106, 0.99999050, 0, 100, 1, 0), -- GO_WINTERGRASP_FORTRESS_WALL_12
(@GGUID+06, 191801, 571, 4197, 4575, 1, 193, 5301.063, 2771.411, 409.9014,  3.14159300, 0.0, 0.0, -1.000000000, 0.00000000, 0, 100, 1, 0), -- GO_WINTERGRASP_FORTRESS_WALL_13
(@GGUID+07, 191802, 571, 4197, 4575, 1, 193, 5280.197, 2995.583, 408.8249,  1.61442800, 0.0, 0.0,  0.722363500, 0.69151360, 0, 100, 1, 0), -- GO_WINTERGRASP_FORTRESS_WALL_14
(@GGUID+08, 191803, 571, 4197, 4575, 1, 193, 5279.136, 2956.023, 408.6041,  1.57079600, 0.0, 0.0,  0.707106600, 0.70710690, 0, 100, 1, 0), -- GO_WINTERGRASP_FORTRESS_WALL_15
(@GGUID+09, 191804, 571, 4197, 4575, 1, 193, 5278.685, 2882.513, 409.5388,  1.57079600, 0.0, 0.0,  0.707106600, 0.70710690, 0, 100, 1, 0), -- GO_WINTERGRASP_FORTRESS_WALL_16
(@GGUID+10, 191806, 571, 4197, 4575, 1, 193, 5279.502, 2798.945, 409.9983,  1.57079600, 0.0, 0.0,  0.707106600, 0.70710690, 0, 100, 1, 0), -- GO_WINTERGRASP_FORTRESS_WALL_17
(@GGUID+11, 191807, 571, 4197, 4575, 1, 193, 5279.937, 2724.766, 409.9452,  1.56207000, 0.0, 0.0,  0.704014800, 0.71018530, 0, 100, 1, 0), -- GO_WINTERGRASP_FORTRESS_WALL_18
(@GGUID+12, 191808, 571, 4197, 4575, 1, 193, 5279.601, 2683.786, 409.8488,  1.55334100, 0.0, 0.0,  0.700908700, 0.71325110, 0, 100, 1, 0), -- GO_WINTERGRASP_FORTRESS_WALL_19
(@GGUID+13, 191809, 571, 4197, 4575, 1, 193, 5330.955, 2630.777, 409.2826,  3.13285800, 0.0, 0.0,  0.999990500, 0.00436732, 0, 100, 1, 0), -- GO_WINTERGRASP_FORTRESS_WALL_20
(@GGUID+14, 190369, 571, 4197, 4575, 1, 193, 5256.085, 2933.963, 409.3571,  3.13285800, 0.0, 0.0,  0.999990500, 0.00436732, 0, 100, 1, 0), -- GO_WINTERGRASP_FORTRESS_WALL_3
(@GGUID+15, 190370, 571, 4197, 4575, 1, 193, 5257.463, 2747.327, 409.7427, -3.13285800, 0.0, 0.0, -0.999990500, 0.00436732, 0, 100, 1, 0), -- GO_WINTERGRASP_FORTRESS_WALL_4
(@GGUID+16, 190371, 571, 4197, 4575, 1, 193, 5214.960, 2934.089, 409.1905, -0.00872424, 0.0, 0.0, -0.004362106, 0.99999050, 0, 100, 1, 0), -- GO_WINTERGRASP_FORTRESS_WALL_5
(@GGUID+17, 190372, 571, 4197, 4575, 1, 193, 5215.821, 2747.566, 409.1884, -3.13285800, 0.0, 0.0, -0.999990500, 0.00436732, 0, 100, 1, 0), -- GO_WINTERGRASP_FORTRESS_WALL_6
(@GGUID+18, 190374, 571, 4197, 4575, 1, 193, 5162.273, 2883.043, 410.2556,  1.57952200, 0.0, 0.0,  0.710185100, 0.70401500, 0, 100, 1, 0), -- GO_WINTERGRASP_FORTRESS_WALL_7
(@GGUID+19, 190376, 571, 4197, 4575, 1, 193, 5163.724, 2799.838, 409.2270,  1.57952200, 0.0, 0.0,  0.710185100, 0.70401500, 0, 100, 1, 0), -- GO_WINTERGRASP_FORTRESS_WALL_8
(@GGUID+20, 191797, 571, 4197, 4575, 1, 193, 5343.290, 2908.860, 409.5757,  0.00872424, 0.0, 0.0,  0.004362106,  0.9999905, 0, 100, 1, 0), -- GO_WINTERGRASP_FORTRESS_INTERIOR_WALL_1
(@GGUID+21, 191798, 571, 4197, 4575, 1, 193, 5342.719, 2771.386, 409.6249,  3.14159300, 0.0, 0.0, -1.000000000,  0.0000000, 0, 100, 1, 0), -- GO_WINTERGRASP_FORTRESS_INTERIOR_WALL_2
(@GGUID+22, 191805, 571, 4197, 4575, 1, 193, 5279.126, 2840.797, 409.7826,  1.57952200, 0.0, 0.0,  0.710185100,  0.7040150, 0, 100, 1, 0), -- GO_WINTERGRASP_FORTRESS_INTERIOR_WALL_3
(@GGUID+23, 190375, 571, 4197, 4575, 1, 193, 5162.991, 2841.232, 410.1892,   -3.132858, 0.0, 0.0,   -0.9999905, 0.00436732, 0, 100, 1, 0), -- GO_WINTERGRASP_FORTRESS_GATE
(@GGUID+24, 191810, 571, 4197, 4575, 1, 193, 5397.108,  2841.54, 425.9014,    3.141593, 0.0, 0.0,         -1.0,        0.0, 0, 100, 1, 0), -- GO_WINTERGRASP_FORTRESS_VAULT_GATE
-- Teleporters
(@GGUID+25, 190763, 571, 4197, 4575, 1,  64, 5153.408, 2901.349, 409.1913, -0.06981169, 0.0, 0.0,  -0.03489876,  0.9993908, 0,   0, 1, 0), -- GO_WINTERGRASP_FORTRESS_TELEPORTER_HORDE
(@GGUID+26, 190763, 571, 4197, 4575, 1,  64, 5268.698, 2666.421, 409.0985, -0.71558490, 0.0, 0.0,  -0.35020730,  0.9366722, 0,   0, 1, 0), -- GO_WINTERGRASP_FORTRESS_TELEPORTER_HORDE
(@GGUID+27, 190763, 571, 4197, 4575, 1,  64, 5197.050, 2944.814, 409.1913,  2.33874000, 0.0, 0.0,   0.92050460,  0.3907318, 0,   0, 1, 0), -- GO_WINTERGRASP_FORTRESS_TELEPORTER_HORDE
(@GGUID+28, 190763, 571, 4197, 4575, 1,  64, 5196.671, 2737.345, 409.1892, -2.93213900, 0.0, 0.0,  -0.99452110,  0.1045355, 0,   0, 1, 0), -- GO_WINTERGRASP_FORTRESS_TELEPORTER_HORDE
(@GGUID+29, 190763, 571, 4197, 4575, 1,  64, 5314.580, 3055.852, 408.8620,  0.54105060, 0.0, 0.0,   0.26723770,  0.9636307, 0,   0, 1, 0), -- GO_WINTERGRASP_FORTRESS_TELEPORTER_HORDE
(@GGUID+30, 190763, 571, 4197, 4575, 1,  64, 5391.277, 2828.094, 418.6752, -2.16420600, 0.0, 0.0,  -0.88294700,  0.4694727, 0,   0, 1, 0), -- GO_WINTERGRASP_FORTRESS_TELEPORTER_HORDE
(@GGUID+31, 190763, 571, 4197, 4575, 1,  64, 5153.931, 2781.671, 409.2455,  1.65806200, 0.0, 0.0,   0.73727700,  0.6755905, 0,   0, 1, 0), -- GO_WINTERGRASP_FORTRESS_TELEPORTER_HORDE
(@GGUID+32, 190763, 571, 4197, 4575, 1,  64, 5311.445, 2618.931, 409.0916, -2.37364400, 0.0, 0.0,  -0.92718320,  0.3746083, 0,   0, 1, 0), -- GO_WINTERGRASP_FORTRESS_TELEPORTER_HORDE
(@GGUID+33, 190763, 571, 4197, 4575, 1,  64, 5269.208, 3013.838, 408.8276, -1.76278200, 0.0, 0.0,  -0.77162460,  0.6360782, 0,   0, 1, 0), -- GO_WINTERGRASP_FORTRESS_TELEPORTER_HORDE
(@GGUID+34, 191575, 571, 4197, 4575, 1, 128, 5153.408, 2901.349, 409.1913, -0.06981169, 0.0, 0.0,  -0.03489876,  0.9993908, 0,   0, 1, 0), -- GO_WINTERGRASP_FORTRESS_TELEPORTER_ALLIANCE
(@GGUID+35, 191575, 571, 4197, 4575, 1, 128, 5268.698, 2666.421, 409.0985, -0.71558490, 0.0, 0.0,  -0.35020730,  0.9366722, 0,   0, 1, 0), -- GO_WINTERGRASP_FORTRESS_TELEPORTER_ALLIANCE
(@GGUID+36, 191575, 571, 4197, 4575, 1, 128, 5197.050, 2944.814, 409.1913,  2.33874000, 0.0, 0.0,   0.92050460,  0.3907318, 0,   0, 1, 0), -- GO_WINTERGRASP_FORTRESS_TELEPORTER_ALLIANCE
(@GGUID+37, 191575, 571, 4197, 4575, 1, 128, 5196.671, 2737.345, 409.1892, -2.93213900, 0.0, 0.0,  -0.99452110,  0.1045355, 0,   0, 1, 0), -- GO_WINTERGRASP_FORTRESS_TELEPORTER_ALLIANCE
(@GGUID+38, 191575, 571, 4197, 4575, 1, 128, 5314.580, 3055.852, 408.8620,  0.54105060, 0.0, 0.0,   0.26723770,  0.9636307, 0,   0, 1, 0), -- GO_WINTERGRASP_FORTRESS_TELEPORTER_ALLIANCE
(@GGUID+39, 191575, 571, 4197, 4575, 1, 128, 5391.277, 2828.094, 418.6752, -2.16420600, 0.0, 0.0,  -0.88294700,  0.4694727, 0,   0, 1, 0), -- GO_WINTERGRASP_FORTRESS_TELEPORTER_ALLIANCE
(@GGUID+40, 191575, 571, 4197, 4575, 1, 128, 5153.931, 2781.671, 409.2455,  1.65806200, 0.0, 0.0,   0.73727700,  0.6755905, 0,   0, 1, 0), -- GO_WINTERGRASP_FORTRESS_TELEPORTER_ALLIANCE
(@GGUID+41, 191575, 571, 4197, 4575, 1, 128, 5311.445, 2618.931, 409.0916, -2.37364400, 0.0, 0.0,  -0.92718320,  0.3746083, 0,   0, 1, 0), -- GO_WINTERGRASP_FORTRESS_TELEPORTER_ALLIANCE
(@GGUID+42, 191575, 571, 4197, 4575, 1, 128, 5269.208, 3013.838, 408.8276, -1.76278200, 0.0, 0.0,  -0.77162460,  0.6360782, 0,   0, 1, 0), -- GO_WINTERGRASP_FORTRESS_TELEPORTER_ALLIANCE
(@GGUID+43, 192951, 571, 4197, 4575, 1, 192, 5314.515, 2703.687, 408.5502, -0.89011660, 0.0, 0.0,  -0.43051050,  0.9025856, 0,   0, 1, 0), -- GO_WINTERGRASP_FORTRESS_TELEPORTER_VEHICLE
(@GGUID+44, 192951, 571, 4197, 4575, 1, 192, 5316.252, 2977.042, 408.5385, -0.82030330, 0.0, 0.0,  -0.39874840,  0.9170604, 0,   0, 1, 0); -- GO_WINTERGRASP_FORTRESS_TELEPORTER_VEHICLE

-- Spawng group templates
DELETE FROM `spawn_group_template` WHERE `groupId` BETWEEN @SPAWNGROUPID+0 AND @SPAWNGROUPID+0;
INSERT INTO `spawn_group_template` (`groupId`,`groupName`,`groupFlags`) VALUES
(@SPAWNGROUPID+0, "Wintergrasp - Fortress teleporters", 0x04);

-- Spawn group assignations
DELETE FROM `spawn_group` WHERE `groupId` BETWEEN @SPAWNGROUPID+0 AND @SPAWNGROUPID+0;
INSERT INTO `spawn_group` (`groupId`,`spawnType`,`spawnId`) VALUES
-- Fortress teleporters
(@SPAWNGROUPID+0, 0, @GGUID+25),
(@SPAWNGROUPID+0, 0, @GGUID+26),
(@SPAWNGROUPID+0, 0, @GGUID+27),
(@SPAWNGROUPID+0, 0, @GGUID+28),
(@SPAWNGROUPID+0, 0, @GGUID+29),
(@SPAWNGROUPID+0, 0, @GGUID+30),
(@SPAWNGROUPID+0, 0, @GGUID+31),
(@SPAWNGROUPID+0, 0, @GGUID+32),
(@SPAWNGROUPID+0, 0, @GGUID+33),
(@SPAWNGROUPID+0, 0, @GGUID+34),
(@SPAWNGROUPID+0, 0, @GGUID+35),
(@SPAWNGROUPID+0, 0, @GGUID+36),
(@SPAWNGROUPID+0, 0, @GGUID+37),
(@SPAWNGROUPID+0, 0, @GGUID+38),
(@SPAWNGROUPID+0, 0, @GGUID+39),
(@SPAWNGROUPID+0, 0, @GGUID+40),
(@SPAWNGROUPID+0, 0, @GGUID+41),
(@SPAWNGROUPID+0, 0, @GGUID+42),
(@SPAWNGROUPID+0, 0, @GGUID+43),
(@SPAWNGROUPID+0, 0, @GGUID+44);
