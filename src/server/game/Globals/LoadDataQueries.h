#pragma once

#include "QueryCallback.h"
#include "DatabaseEnv.h"

#include <string>
#include <optional>
#include <unordered_map>

// Query that either has some async results or can be reloadable synchronously - for the ObjectMgr!
class LoadDataQuery
{
public:
    LoadDataQuery(std::string const& query);
    QueryResult GetOrQueryResults();
    static void StartAllAsyncQueries();
    static void WaitForAllAsyncQueries();
private:
    void StartAsyncQuery();
    void WaitForAsyncQuery();
    std::string m_query;
    std::optional<QueryCallback> m_asyncQuery;
    std::optional<QueryResult> m_asyncResult;
};

extern LoadDataQuery LoadCreatureLocaleQuery;
extern LoadDataQuery LoadGossipMenuItemsLocalesQuery;
extern LoadDataQuery LoadPointOfInterestLocalesQuery;
extern LoadDataQuery LoadCreatureTemplatesQuery;
extern LoadDataQuery LoadCreatureTemplateResistancesQuery;
extern LoadDataQuery LoadCreatureTemplateSpellsQuery;
extern LoadDataQuery LoadCreatureTemplateAddonsQuery;
extern LoadDataQuery LoadCreatureAddonsQuery;
extern LoadDataQuery LoadGameObjectAddonsQuery;
extern LoadDataQuery LoadEquipmentTemplatesQuery;
extern LoadDataQuery LoadCreatureMovementOverridesQuery;
extern LoadDataQuery LoadCreatureModelInfoQuery;
extern LoadDataQuery LoadPlayerTotemModelsQuery;
extern LoadDataQuery LoadLinkedRespawnQuery;
extern LoadDataQuery LoadTempSummonsQuery;
extern LoadDataQuery LoadCreaturesQuery;
extern LoadDataQuery LoadGameObjectsQuery;
extern LoadDataQuery LoadSpawnGroupTemplatesQuery;
extern LoadDataQuery LoadSpawnGroupsQuery;
extern LoadDataQuery LoadInstanceSpawnGroupsQuery;
extern LoadDataQuery LoadItemLocalesQuery;
extern LoadDataQuery LoadItemTemplatesQuery;
extern LoadDataQuery LoadItemSetNameLocalesQuery;
extern LoadDataQuery LoadItemSetNamesQuery;
extern LoadDataQuery LoadVehicleTemplateAccessoriesQuery;
extern LoadDataQuery LoadVehicleTemplateQuery;
extern LoadDataQuery LoadVehicleAccessoriesQuery;
extern LoadDataQuery LoadVehicleSeatAddonQuery;
extern LoadDataQuery LoadPetLevelInfoQuery;
extern LoadDataQuery LoadPlayerInfoQuery;
extern LoadDataQuery LoadPlayerCreateInfoItemsQuery;
extern LoadDataQuery LoadPlayerCreateInfoCreateSkillsQuery;
extern LoadDataQuery LoadPlayerCreateInfoSpellCustomQuery;
extern LoadDataQuery LoadPlayerCreateInfoCastSpellQuery;
extern LoadDataQuery LoadPlayerCreateInfoActionQuery;
extern LoadDataQuery LoadPlayerClassLevelStatsQuery;
extern LoadDataQuery LoadPlayerLevelStatsQuery;
extern LoadDataQuery LoadPlayerXPForLevelQuery;
extern LoadDataQuery LoadQuestsQuery;
extern LoadDataQuery LoadQuestLocalesQuery;
extern LoadDataQuery LoadSpellScriptNamesQuery;
extern LoadDataQuery LoadPageTextsQuery;
extern LoadDataQuery LoadPageTextLocalesQuery;
extern LoadDataQuery LoadInstanceTemplateQuery;
extern LoadDataQuery LoadInstanceEncountersQuery;
extern LoadDataQuery LoadGossipTextQuery;
extern LoadDataQuery LoadNpcTextLocalesQuery;
extern LoadDataQuery LoadQuestAreaTriggersQuery;
extern LoadDataQuery LoadQuestGreetingsQuery;
extern LoadDataQuery LoadQuestGreetingLocalesQuery;
extern LoadDataQuery LoadQuestOfferRewardLocaleQuery;
extern LoadDataQuery LoadQuestRequestItemsLocaleQuery;
extern LoadDataQuery LoadAreaTriggersQuery;
extern LoadDataQuery LoadAreaTriggerScriptsQuery;
extern LoadDataQuery LoadGraveyardZonesQuery;
extern LoadDataQuery LoadAreaTriggerTeleportsQuery;
extern LoadDataQuery LoadAccessRequirementsQuery;
extern LoadDataQuery LoadSelectmaxTransport;
extern LoadDataQuery LoadSelectMaxCreatures;
extern LoadDataQuery LoadSelectMaxGameObject;
extern LoadDataQuery LoadGameObjectLocaleQuery;
extern LoadDataQuery LoadGameObjectTemplateQuery;
extern LoadDataQuery LoadGameObjectTemplateAddonsQuery;
extern LoadDataQuery LoadGameObjectOverridesQuery;
extern LoadDataQuery LoadExplorationBaseXPQuery;
extern LoadDataQuery LoadPetNamesQuery;
extern LoadDataQuery LoadReputationRewardRateQuery;
extern LoadDataQuery LoadReputationOnKillQuery;
extern LoadDataQuery LoadReputationSpilloverTemplateQuery;
extern LoadDataQuery LoadPointsOfInterestQuery;
extern LoadDataQuery LoadQuestPOIQuery;
extern LoadDataQuery LoadQuestPOIPointsQuery;
extern LoadDataQuery LoadNPCSpellClickSpellsQuery;
extern LoadDataQuery LoadTrinityStringsQuery;
extern LoadDataQuery LoadFishingBaseSkillLevelQuery;
extern LoadDataQuery LoadGameTeleQuery;
extern LoadDataQuery LoadMailLevelRewardsQuery;
extern LoadDataQuery LoadTrainerSpellQuery;
extern LoadDataQuery LoadTrainerQuery;
extern LoadDataQuery LoadTrainerLocaleQuery;
extern LoadDataQuery LoadCreatureDefaultTrainersQuery;
extern LoadDataQuery LoadVendorsQuery;
extern LoadDataQuery LoadGossipMenuQuery;
extern LoadDataQuery LoadGossipMenuItemsQuery;
extern LoadDataQuery LoadScriptNamesQuery;
extern LoadDataQuery LoadBroadcastTextQuery;
extern LoadDataQuery LoadBroadcastTextsLocaleQuery;
extern LoadDataQuery LoadCreatureClassLevelStatsQuery;
extern LoadDataQuery LoadFactionChangeAchievementsQuery;
extern LoadDataQuery LoadFactionChangeItemsQuery;
extern LoadDataQuery LoadFactionChangeQuestsQuery;
extern LoadDataQuery LoadFactionChangeReputationsQuery;
extern LoadDataQuery LoadFactionChangeSpellsQuery;
extern LoadDataQuery LoadFactionChangeTitlesQuery;
extern LoadDataQuery LoadGameObjectQuestItemsQuery;
extern LoadDataQuery LoadCreatureQuestItemsQuery;
extern LoadDataQuery LoadAchievementCriteriaDataQuery;
extern LoadDataQuery LoadAchievementRewardsQuery;
extern LoadDataQuery LoadAchievementRewardLocalesQuery;
extern LoadDataQuery LoadBattlefieldQuery;
extern LoadDataQuery LoadBattlegroundTemplateQuery;
extern LoadDataQuery LoadBattlemasterEntryQuery;
extern LoadDataQuery LoadConditionsQuery;
extern LoadDataQuery LoadDisablesQueryQuery;
extern LoadDataQuery LFGLoadRewardsQuery;
extern LoadDataQuery LFGLoadDungeonTemplateQuery;
extern LoadDataQuery LoadCreatureFormationsQuery;
extern LoadDataQuery LoadRandomEnchantmentsTableQuery;
extern LoadDataQuery LoadGameEventsQuery;
extern LoadDataQuery LoadGameEventPrerequisiteQuery;
extern LoadDataQuery LoadGameEventCreaturesQuery;
extern LoadDataQuery LoadGameEventGameObjectsQuery;
extern LoadDataQuery LoadGameEventDisplayChangeQuery;
extern LoadDataQuery LoadGameEventCreatureQuestQuery;
extern LoadDataQuery LoadGameEventGameObjectQuestQuery;
extern LoadDataQuery LoadGameObjectQuestConditionQuery;
extern LoadDataQuery LoadGameEventConditionQuery;
extern LoadDataQuery LoadGameEventNPCFlagQuery;
extern LoadDataQuery LoadGameEventSeasonalQuestRelationQuery;
extern LoadDataQuery LoadGameEventNPCVendorQuery;
extern LoadDataQuery LoadGameEventBattlegroundHolidayQuery;
extern LoadDataQuery LoadGameEventPoolsQuery;
extern LoadDataQuery LoadHolidayDatesQuery;
extern LoadDataQuery LoadGameEventMaxEntryQuery;
extern LoadDataQuery LoadTransportTemplatesQuery;
extern LoadDataQuery LoadTransportsQuery;
extern LoadDataQuery LoadWaypointsQuery;
extern LoadDataQuery LoadOutdoorPVPTemplatesQuery;
extern LoadDataQuery LoadPoolTemplatesQuery;
extern LoadDataQuery LoadPoolCreatureMembersQuery;
extern LoadDataQuery LoadPoolGameObjectMembersQuery;
extern LoadDataQuery LoadPoolMotherMembersQuery;
extern LoadDataQuery LoadPoolHandlingQuery;
extern LoadDataQuery LoadQuestPoolsQuery;
extern LoadDataQuery LoadScriptWaypointCountQuery;
extern LoadDataQuery LoadScriptWaypointsQuery;
extern LoadDataQuery LoadScriptSplineChainMetaQuery;
extern LoadDataQuery LoadScriptSplineChainWaypointsQuery;
extern LoadDataQuery LoadSkillDiscoveryTemplateQuery;
extern LoadDataQuery LoadSkillPerfectItemTemplateQuery;
extern LoadDataQuery LoadSkillExtraItemTemplateQuery;
extern LoadDataQuery LoadSpellRanksQuery;
extern LoadDataQuery LoadSpellRequiredQuery;
extern LoadDataQuery LoadSpellLearnSpellsQuery;
extern LoadDataQuery LoadSpellTargetPositionQuery;
extern LoadDataQuery LoadSpellGroupsQuery;
extern LoadDataQuery LoadSpellGroupStackRulesQuery;
extern LoadDataQuery LoadSpellProcsQuery;
extern LoadDataQuery LoadSpellBonusesQuery;
extern LoadDataQuery LoadSpellThreatsQuery;
extern LoadDataQuery LoadSpellPetAurasQuery;
extern LoadDataQuery LoadSpellEnchantProcDataQuery;
extern LoadDataQuery LoadSpellLinkedQuery;
extern LoadDataQuery LoadSpellAreasQuery;
extern LoadDataQuery LoadSpellInfoCustomAttributesQuery;
extern LoadDataQuery LoadCreatureTextLocalesQuery;
extern LoadDataQuery LoadMaxWardenChecksQuery;
extern LoadDataQuery LoadWardenChecksQuery;
extern LoadDataQuery LoadWeatherDataQuery;
extern LoadDataQuery LoadSmartScriptsQuery;
extern LoadDataQuery LoadCreatureTextQuery;

extern std::unordered_map<std::string, LoadDataQuery*> LoadLootTemplateQueries;
