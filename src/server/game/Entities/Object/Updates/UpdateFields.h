/*
 * This file is part of the TrinityCore Project. See AUTHORS file for Copyright information
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License as published by the
 * Free Software Foundation; either version 2 of the License, or (at your
 * option) any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
 * more details.
 *
 * You should have received a copy of the GNU General Public License along
 * with this program. If not, see <http://www.gnu.org/licenses/>.
 */

#ifndef TRINITYCORE_UPDATE_FIELDS_H
#define TRINITYCORE_UPDATE_FIELDS_H

#include "EnumFlag.h"
#include "ItemPacketsCommon.h"
#include "MythicPlusPacketsCommon.h"
#include "ObjectGuid.h"
#include "PerksProgramPacketsCommon.h"
#include "Position.h"
#include "QuaternionData.h"
#include "UpdateField.h"
#include "UpdateFieldsAaBox.h"
#include "UpdateMask.h"

// This file is automatically generated, DO NOT EDIT

class AreaTrigger;
class AzeriteEmpoweredItem;
class AzeriteItem;
class Bag;
class BaseEntity;
class ByteBuffer;
class Conversation;
class Corpse;
class Creature;
class DynamicObject;
class GameObject;
class Item;
class Object;
class Player;
class Unit;

namespace UF
{
struct ObjectData : public IsUpdateFieldStructureTag, public HasChangesMask<4>
{
    UpdateField<int32, 0, 1> EntryID;
    struct EntryIDTag : ViewerDependentValueTag<int32> {};
    UpdateField<uint32, 0, 2> DynamicFlags;
    struct DynamicFlagsTag : ViewerDependentValueTag<uint32> {};
    UpdateField<float, 0, 3> Scale;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Object const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Object const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, Object const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct ItemEnchantment : public IsUpdateFieldStructureTag, public HasChangesMask<5>
{
    UpdateField<int32, 0, 1> ID;
    UpdateField<uint32, 0, 2> Duration;
    UpdateField<int16, 0, 3> Charges;
    UpdateField<uint16, 0, 4> Inactive;

    void WriteCreate(ByteBuffer& data, Item const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Item const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct ItemMod : public IsUpdateFieldStructureTag
{
    uint8 Type = 0;
    int32 Value = 0;

    void WriteCreate(ByteBuffer& data, Item const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Item const* owner, Player const* receiver) const;
    bool operator==(ItemMod const& right) const;
    bool operator!=(ItemMod const& right) const { return !(*this == right); }
};

struct ItemModList : public IsUpdateFieldStructureTag, public HasChangesMask<1>
{
    DynamicUpdateField<UF::ItemMod, -1, 0> Values;

    void WriteCreate(ByteBuffer& data, Item const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Item const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct ArtifactPower : public IsUpdateFieldStructureTag
{
    int16 ArtifactPowerID = 0;
    uint8 PurchasedRank = 0;
    uint8 CurrentRankWithBonus = 0;

    void WriteCreate(ByteBuffer& data, Item const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Item const* owner, Player const* receiver) const;
    bool operator==(ArtifactPower const& right) const;
    bool operator!=(ArtifactPower const& right) const { return !(*this == right); }
};

struct SocketedGem : public IsUpdateFieldStructureTag, public HasChangesMask<20>
{
    UpdateField<int32, 0, 1> ItemID;
    UpdateField<uint8, 0, 2> Context;
    UpdateFieldArray<uint16, 16, 3, 4> BonusListIDs;

    void WriteCreate(ByteBuffer& data, Item const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Item const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct ItemData : public IsUpdateFieldStructureTag, public HasChangesMask<41>
{
    DynamicUpdateField<UF::ArtifactPower, 0, 1> ArtifactPowers;
    DynamicUpdateField<UF::SocketedGem, 0, 2> Gems;
    UpdateField<ObjectGuid, 0, 3> Owner;
    UpdateField<ObjectGuid, 0, 4> ContainedIn;
    UpdateField<ObjectGuid, 0, 5> Creator;
    UpdateField<ObjectGuid, 0, 6> GiftCreator;
    UpdateField<uint32, 0, 7> StackCount;
    UpdateField<uint32, 0, 8> Expiration;
    UpdateField<uint32, 0, 9> DynamicFlags;
    UpdateField<uint32, 0, 10> Durability;
    UpdateField<uint32, 0, 11> MaxDurability;
    UpdateField<uint32, 0, 12> CreatePlayedTime;
    UpdateField<uint8, 0, 13> Context;
    UpdateField<int64, 0, 14> CreateTime;
    UpdateField<uint64, 0, 15> ArtifactXP;
    UpdateField<uint8, 0, 16> ItemAppearanceModID;
    UpdateField<UF::ItemModList, 0, 17> Modifiers;
    UpdateField<uint32, 0, 18> ZoneFlags;
    UpdateField<WorldPackets::Item::ItemBonusKey, 0, 19> ItemBonusKey;
    UpdateField<uint16, 0, 20> DEBUGItemLevel;
    UpdateFieldArray<int32, 5, 21, 22> SpellCharges;
    UpdateFieldArray<UF::ItemEnchantment, 13, 27, 28> Enchantment;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Item const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Item const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, Item const* owner, Player const* receiver) const;
    static void AppendAllowedFieldsMaskForFlag(Mask& allowedMaskForTarget, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags);
    static void FilterDisallowedFieldsMaskForFlag(Mask& changesMask, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags);
    void ClearChangesMask();
};

struct ContainerData : public IsUpdateFieldStructureTag, public HasChangesMask<101>
{
    UpdateField<uint32, 0, 1> NumSlots;
    UpdateFieldArray<ObjectGuid, 98, 2, 3> Slots;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Bag const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Bag const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, Bag const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct AzeriteEmpoweredItemData : public IsUpdateFieldStructureTag, public HasChangesMask<6>
{
    UpdateFieldArray<int32, 5, 0, 1> Selections;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, AzeriteEmpoweredItem const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, AzeriteEmpoweredItem const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, AzeriteEmpoweredItem const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct UnlockedAzeriteEssence : public IsUpdateFieldStructureTag
{
    uint32 AzeriteEssenceID = 0;
    uint32 Rank = 0;

    void WriteCreate(ByteBuffer& data, AzeriteItem const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, AzeriteItem const* owner, Player const* receiver) const;
    bool operator==(UnlockedAzeriteEssence const& right) const;
    bool operator!=(UnlockedAzeriteEssence const& right) const { return !(*this == right); }
};

struct SelectedAzeriteEssences : public IsUpdateFieldStructureTag, public HasChangesMask<8>
{
    UpdateField<bool, 0, 1> Enabled;
    UpdateField<uint32, 0, 2> SpecializationID;
    UpdateFieldArray<uint32, 4, 3, 4> AzeriteEssenceID;

    void WriteCreate(ByteBuffer& data, AzeriteItem const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, AzeriteItem const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct AzeriteItemData : public IsUpdateFieldStructureTag, public HasChangesMask<10>
{
    UpdateField<bool, 0, 1> Enabled;
    DynamicUpdateField<UF::UnlockedAzeriteEssence, 0, 2> UnlockedEssences;
    DynamicUpdateField<uint32, 0, 4> UnlockedEssenceMilestones;
    DynamicUpdateField<UF::SelectedAzeriteEssences, 0, 3> SelectedEssences;
    UpdateField<uint64, 0, 5> Xp;
    UpdateField<uint32, 0, 6> Level;
    UpdateField<uint32, 0, 7> AuraLevel;
    UpdateField<uint32, 0, 8> KnowledgeLevel;
    UpdateField<int32, 0, 9> DEBUGknowledgeWeek;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, AzeriteItem const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, AzeriteItem const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, AzeriteItem const* owner, Player const* receiver) const;
    static void AppendAllowedFieldsMaskForFlag(Mask& allowedMaskForTarget, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags);
    static void FilterDisallowedFieldsMaskForFlag(Mask& changesMask, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags);
    void ClearChangesMask();
};

struct SpellCastVisual : public IsUpdateFieldStructureTag
{
    int32 SpellXSpellVisualID = 0;
    int32 ScriptVisualID = 0;

    void WriteCreate(ByteBuffer& data, Object const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Object const* owner, Player const* receiver) const;
    bool operator==(SpellCastVisual const& right) const;
    bool operator!=(SpellCastVisual const& right) const { return !(*this == right); }
};

struct UnitChannel : public IsUpdateFieldStructureTag
{
    int32 SpellID = 0;
    UF::SpellCastVisual SpellVisual;
    uint32 StartTimeMs = 0;
    uint32 Duration = 0;

    void WriteCreate(ByteBuffer& data, Unit const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Unit const* owner, Player const* receiver) const;
    bool operator==(UnitChannel const& right) const;
    bool operator!=(UnitChannel const& right) const { return !(*this == right); }
};

struct VisibleItem : public IsUpdateFieldStructureTag, public HasChangesMask<8>
{
    UpdateField<bool, 0, 1> Field_10;
    UpdateField<bool, 0, 2> Field_11;
    UpdateField<int32, 0, 3> ItemID;
    UpdateField<int32, 0, 4> SecondaryItemModifiedAppearanceID;
    UpdateField<int32, 0, 5> ConditionalItemAppearanceID;
    UpdateField<uint16, 0, 6> ItemAppearanceModID;
    UpdateField<uint16, 0, 7> ItemVisual;

    void WriteCreate(ByteBuffer& data, Unit const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Unit const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct PassiveSpellHistory : public IsUpdateFieldStructureTag
{
    int32 SpellID = 0;
    int32 AuraSpellID = 0;

    void WriteCreate(ByteBuffer& data, Unit const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Unit const* owner, Player const* receiver) const;
    bool operator==(PassiveSpellHistory const& right) const;
    bool operator!=(PassiveSpellHistory const& right) const { return !(*this == right); }
};

struct UnitAssistActionData : public IsUpdateFieldStructureTag, public HasChangesMask<4>
{
    UpdateField<uint8, 0, 1> Type;
    UpdateField<std::string, 0, 2> PlayerName;
    UpdateField<uint32, 0, 3> VirtualRealmAddress;

    void WriteCreate(ByteBuffer& data, Unit const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Unit const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct UnitData : public IsUpdateFieldStructureTag, public HasChangesMask<228>
{
    UpdateField<bool, 0, 1> Field_314;
    UpdateField<std::vector<uint32>, 0, 2> StateWorldEffectIDs;
    struct StateWorldEffectIDsTag : ViewerDependentValueTag<std::vector<uint32>> {};
    DynamicUpdateField<UF::PassiveSpellHistory, 0, 3> PassiveSpells;
    DynamicUpdateField<int32, 0, 4> WorldEffects;
    DynamicUpdateField<ObjectGuid, 0, 5> ChannelObjects;
    UpdateField<int32, 0, 6> DisplayID;
    struct DisplayIDTag : ViewerDependentValueTag<int32> {};
    UpdateField<uint32, 0, 7> NpcFlags;
    struct NpcFlagsTag : ViewerDependentValueTag<uint32> {};
    UpdateField<uint32, 0, 8> NpcFlags2;
    struct NpcFlags2Tag : ViewerDependentValueTag<uint32> {};
    UpdateField<uint32, 0, 9> StateSpellVisualID;
    struct StateSpellVisualIDTag : ViewerDependentValueTag<uint32> {};
    UpdateField<uint32, 0, 10> StateAnimID;
    struct StateAnimIDTag : ViewerDependentValueTag<uint32> {};
    UpdateField<uint32, 0, 11> StateAnimKitID;
    struct StateAnimKitIDTag : ViewerDependentValueTag<uint32> {};
    UpdateField<uint32, 0, 12> StateWorldEffectsQuestObjectiveID;
    struct StateWorldEffectsQuestObjectiveIDTag : ViewerDependentValueTag<uint32> {};
    UpdateField<int32, 0, 13> SpellOverrideNameID;
    UpdateField<ObjectGuid, 0, 14> Charm;
    UpdateField<ObjectGuid, 0, 15> Summon;
    UpdateField<ObjectGuid, 0, 16> Critter;
    UpdateField<ObjectGuid, 0, 17> CharmedBy;
    UpdateField<ObjectGuid, 0, 18> SummonedBy;
    UpdateField<ObjectGuid, 0, 19> CreatedBy;
    UpdateField<ObjectGuid, 0, 20> DemonCreator;
    UpdateField<ObjectGuid, 0, 21> LookAtControllerTarget;
    UpdateField<ObjectGuid, 0, 22> Target;
    UpdateField<ObjectGuid, 0, 23> BattlePetCompanionGUID;
    UpdateField<uint64, 0, 24> BattlePetDBID;
    UpdateField<UF::UnitChannel, 0, 25> ChannelData;
    UpdateField<int8, 0, 26> SpellEmpowerStage;
    UpdateField<uint32, 0, 27> SummonedByHomeRealm;
    UpdateField<uint8, 0, 28> Race;
    UpdateField<uint8, 0, 29> ClassId;
    UpdateField<uint8, 0, 30> PlayerClassId;
    UpdateField<uint8, 0, 31> Sex;
    UpdateField<uint8, 32, 33> CreatureType;
    UpdateField<uint8, 32, 34> DisplayPower;
    UpdateField<uint32, 32, 35> OverrideDisplayPowerID;
    UpdateField<int64, 32, 36> Health;
    UpdateField<int64, 32, 37> MaxHealth;
    UpdateField<int32, 32, 38> Level;
    UpdateField<int32, 32, 39> EffectiveLevel;
    UpdateField<int32, 32, 40> ContentTuningID;
    UpdateField<int32, 32, 41> ScalingLevelMin;
    UpdateField<int32, 32, 42> ScalingLevelMax;
    UpdateField<int32, 32, 43> ScalingLevelDelta;
    UpdateField<uint8, 32, 44> ScalingFactionGroup;
    UpdateField<int32, 32, 45> FactionTemplate;
    struct FactionTemplateTag : ViewerDependentValueTag<int32> {};
    UpdateField<uint32, 32, 46> Flags;
    struct FlagsTag : ViewerDependentValueTag<uint32> {};
    UpdateField<uint32, 32, 47> Flags2;
    struct Flags2Tag : ViewerDependentValueTag<uint32> {};
    UpdateField<uint32, 32, 48> Flags3;
    struct Flags3Tag : ViewerDependentValueTag<uint32> {};
    UpdateField<uint32, 32, 49> Flags4;
    struct Flags4Tag : ViewerDependentValueTag<uint32> {};
    UpdateField<uint32, 32, 50> AuraState;
    struct AuraStateTag : ViewerDependentValueTag<uint32> {};
    UpdateField<uint32, 32, 51> RangedAttackRoundBaseTime;
    UpdateField<float, 32, 52> BoundingRadius;
    UpdateField<float, 32, 53> CombatReach;
    UpdateField<float, 32, 54> DisplayScale;
    UpdateField<int32, 32, 55> CreatureFamily;
    UpdateField<uint8, 32, 56> OverrideCreatureType;
    UpdateField<int32, 32, 57> NativeDisplayID;
    UpdateField<float, 32, 58> NativeXDisplayScale;
    UpdateField<int32, 32, 59> MountDisplayID;
    UpdateField<int32, 32, 60> CosmeticMountDisplayID;
    UpdateField<float, 32, 61> MinDamage;
    UpdateField<float, 32, 62> MaxDamage;
    UpdateField<float, 32, 63> MinOffHandDamage;
    UpdateField<float, 64, 65> MaxOffHandDamage;
    UpdateField<uint8, 64, 66> StandState;
    UpdateField<uint8, 64, 67> PetTalentPoints;
    UpdateField<uint8, 64, 68> VisFlags;
    UpdateField<uint8, 64, 69> AnimTier;
    UpdateField<uint32, 64, 70> PetNumber;
    UpdateField<uint32, 64, 71> PetNameTimestamp;
    UpdateField<uint32, 64, 72> PetExperience;
    UpdateField<uint32, 64, 73> PetNextLevelExperience;
    UpdateField<float, 64, 74> ModCastingSpeed;
    UpdateField<float, 64, 75> ModCastingSpeedNeg;
    UpdateField<float, 64, 76> ModSpellHaste;
    UpdateField<float, 64, 77> ModHaste;
    UpdateField<float, 64, 78> ModRangedHaste;
    UpdateField<float, 64, 79> ModHasteRegen;
    UpdateField<float, 64, 80> ModTimeRate;
    UpdateField<int32, 64, 81> CreatedBySpell;
    UpdateField<int32, 64, 82> EmoteState;
    UpdateField<int32, 64, 83> BaseMana;
    UpdateField<int32, 64, 84> BaseHealth;
    UpdateField<uint8, 64, 85> SheatheState;
    UpdateField<uint8, 64, 86> PvpFlags;
    struct PvpFlagsTag : ViewerDependentValueTag<uint8> {};
    UpdateField<uint8, 64, 87> PetFlags;
    UpdateField<uint8, 64, 88> ShapeshiftForm;
    UpdateField<int32, 64, 89> AttackPower;
    UpdateField<int32, 64, 90> AttackPowerModPos;
    UpdateField<int32, 64, 91> AttackPowerModNeg;
    UpdateField<float, 64, 92> AttackPowerMultiplier;
    UpdateField<int32, 64, 93> AttackPowerModSupport;
    UpdateField<int32, 64, 94> RangedAttackPower;
    UpdateField<int32, 64, 95> RangedAttackPowerModPos;
    UpdateField<int32, 96, 97> RangedAttackPowerModNeg;
    UpdateField<float, 96, 98> RangedAttackPowerMultiplier;
    UpdateField<int32, 96, 99> RangedAttackPowerModSupport;
    UpdateField<int32, 96, 100> MainHandWeaponAttackPower;
    UpdateField<int32, 96, 101> OffHandWeaponAttackPower;
    UpdateField<int32, 96, 102> RangedWeaponAttackPower;
    UpdateField<int32, 96, 103> SetAttackSpeedAura;
    UpdateField<float, 96, 104> Lifesteal;
    UpdateField<float, 96, 105> MinRangedDamage;
    UpdateField<float, 96, 106> MaxRangedDamage;
    UpdateField<float, 96, 107> ManaCostMultiplier;
    UpdateField<float, 96, 108> MaxHealthModifier;
    UpdateField<float, 96, 109> HoverHeight;
    UpdateField<int32, 96, 110> MinItemLevelCutoff;
    UpdateField<int32, 96, 111> MinItemLevel;
    UpdateField<int32, 96, 112> MaxItemLevel;
    UpdateField<int32, 96, 113> AzeriteItemLevel;
    UpdateField<int32, 96, 114> WildBattlePetLevel;
    UpdateField<int32, 96, 115> BattlePetCompanionExperience;
    UpdateField<uint32, 96, 116> BattlePetCompanionNameTimestamp;
    UpdateField<int32, 96, 117> InteractSpellID;
    struct InteractSpellIDTag : ViewerDependentValueTag<int32> {};
    UpdateField<int32, 96, 118> ScaleDuration;
    UpdateField<int32, 96, 119> LooksLikeMountID;
    UpdateField<int32, 96, 120> LooksLikeCreatureID;
    UpdateField<int32, 96, 121> LookAtControllerID;
    UpdateField<int32, 96, 122> PerksVendorItemID;
    UpdateField<int32, 96, 123> TaxiNodesID;
    UpdateField<ObjectGuid, 96, 124> GuildGUID;
    UpdateField<int32, 96, 125> FlightCapabilityID;
    UpdateField<float, 96, 126> GlideEventSpeedDivisor;                         // Movement speed gets divided by this value when evaluating what GlideEvents to use
    UpdateField<int32, 96, 127> DriveCapabilityID;
    UpdateField<int32, 128, 129> MaxHealthModifierFlatNeg;
    UpdateField<int32, 128, 130> MaxHealthModifierFlatPos;
    UpdateField<uint32, 128, 131> SilencedSchoolMask;
    UpdateField<uint32, 128, 132> CurrentAreaID;
    UpdateField<float, 128, 133> NameplateDistanceMod;
    UpdateField<float, 128, 134> AutoAttackRangeMod;                            // When UnitFlags3 & 0x40000000 is set, increases some autoattack range by this amount
    UpdateField<ObjectGuid, 128, 135> NameplateAttachToGUID;                    // When set, nameplate of this unit will instead appear on that object
    OptionalUpdateField<UF::UnitAssistActionData, 128, 136> AssistActionData;
    UpdateFieldArray<int32, 10, 137, 138> Power;
    UpdateFieldArray<int32, 10, 137, 148> MaxPower;
    UpdateFieldArray<float, 10, 137, 158> PowerRegenFlatModifier;
    UpdateFieldArray<float, 10, 137, 168> PowerRegenInterruptedFlatModifier;
    UpdateFieldArray<UF::VisibleItem, 3, 178, 179> VirtualItems;
    UpdateFieldArray<uint32, 2, 182, 183> AttackRoundBaseTime;
    UpdateFieldArray<int32, 5, 185, 186> Stats;
    UpdateFieldArray<int32, 5, 185, 191> StatPosBuff;
    UpdateFieldArray<int32, 5, 185, 196> StatNegBuff;
    UpdateFieldArray<int32, 5, 185, 201> StatSupportBuff;
    UpdateFieldArray<int32, 7, 206, 207> Resistances;
    UpdateFieldArray<int32, 7, 206, 214> BonusResistanceMods;
    UpdateFieldArray<int32, 7, 206, 221> ManaCostModifier;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Unit const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Unit const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, Unit const* owner, Player const* receiver) const;
    static void AppendAllowedFieldsMaskForFlag(Mask& allowedMaskForTarget, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags);
    static void FilterDisallowedFieldsMaskForFlag(Mask& changesMask, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags);
    void ClearChangesMask();
};

struct ChrCustomizationChoice : public IsUpdateFieldStructureTag
{
    uint32 ChrCustomizationOptionID = 0;
    uint32 ChrCustomizationChoiceID = 0;

    void WriteCreate(ByteBuffer& data, Object const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Object const* owner, Player const* receiver) const;
    bool operator==(ChrCustomizationChoice const& right) const;
    bool operator!=(ChrCustomizationChoice const& right) const { return !(*this == right); }
};

struct QuestLog : public IsUpdateFieldStructureTag, public HasChangesMask<31>
{
    UpdateField<int32, 0, 1> QuestID;
    UpdateField<uint16, 0, 2> StateFlags;
    UpdateField<int64, 0, 3> EndTime;
    UpdateField<uint32, 0, 4> ObjectiveFlags;
    UpdateField<uint32, 0, 5> EnabledObjectivesMask;
    UpdateFieldArray<int16, 24, 6, 7> ObjectiveProgress;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct ArenaCooldown : public IsUpdateFieldStructureTag, public HasChangesMask<8>
{
    UpdateField<int32, 0, 1> SpellID;
    UpdateField<int32, 0, 2> Charges;
    UpdateField<uint32, 0, 3> Flags;
    UpdateField<uint32, 0, 4> StartTime;
    UpdateField<uint32, 0, 5> EndTime;
    UpdateField<uint32, 0, 6> NextChargeTime;
    UpdateField<uint8, 0, 7> MaxCharges;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct ZonePlayerForcedReaction : public IsUpdateFieldStructureTag, public HasChangesMask<3>
{
    UpdateField<int32, 0, 1> FactionID;
    UpdateField<int32, 0, 2> Reaction;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct PetCreatureName : public IsUpdateFieldStructureTag, public HasChangesMask<3>
{
    UpdateField<uint32, 0, 1> CreatureID;
    UpdateField<std::string, 0, 2> Name;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct CTROptions : public IsUpdateFieldStructureTag
{
    std::vector<uint32> ConditionalFlags;
    uint8 FactionGroup = 0;
    uint32 ChromieTimeExpansionMask = 0;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(CTROptions const& right) const;
    bool operator!=(CTROptions const& right) const { return !(*this == right); }
};

struct LeaverInfo : public IsUpdateFieldStructureTag
{
    bool IsLeaver = false;
    ObjectGuid BnetAccountGUID;
    float LeaveScore = 0.0f;
    uint32 SeasonID = 0;
    uint32 TotalLeaves = 0;
    uint32 TotalSuccesses = 0;
    int32 ConsecutiveSuccesses = 0;
    int64 LastPenaltyTime = 0;
    int64 LeaverExpirationTime = 0;
    int32 Flags = 0;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(LeaverInfo const& right) const;
    bool operator!=(LeaverInfo const& right) const { return !(*this == right); }
};

struct DeclinedNames : public IsUpdateFieldStructureTag, public HasChangesMask<6>
{
    UpdateFieldArray<std::string, 5, 0, 1> Name;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct CustomTabardInfo : public IsUpdateFieldStructureTag, public HasChangesMask<6>
{
    UpdateField<int32, 0, 1> EmblemStyle;
    UpdateField<int32, 0, 2> EmblemColor;
    UpdateField<int32, 0, 3> BorderStyle;
    UpdateField<int32, 0, 4> BorderColor;
    UpdateField<int32, 0, 5> BackgroundColor;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct NPCAsPlayerInfo : public IsUpdateFieldStructureTag
{
    int32 Field_0 = 0;
    int32 CharacterLoadoutID = 0;
    int32 CreatureID = 0;
    TaggedPosition<Position::XYZ> LocWorldSpace;
    float FacingWorldSpace = 0.0f;
    ObjectGuid TransportGUID;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(NPCAsPlayerInfo const& right) const;
    bool operator!=(NPCAsPlayerInfo const& right) const { return !(*this == right); }
};

struct PlayerData : public IsUpdateFieldStructureTag, public HasChangesMask<325>
{
    UpdateField<bool, 0, 1> HasQuestSession;
    UpdateField<bool, 0, 2> HasLevelLink;
    DynamicUpdateField<UF::ChrCustomizationChoice, 0, 3> Customizations;
    DynamicUpdateField<UF::ChrCustomizationChoice, 0, 4> RandomCustomizations;
    DynamicUpdateField<UF::QuestLog, 0, 5> QuestSessionQuestLog;
    DynamicUpdateField<UF::ArenaCooldown, 0, 6> ArenaCooldowns;
    DynamicUpdateField<int32, 0, 8> VisualItemReplacements;
    DynamicUpdateField<UF::PetCreatureName, 0, 7> PetNames;
    UpdateField<ObjectGuid, 0, 9> DuelArbiter;
    UpdateField<ObjectGuid, 0, 10> WowAccount;
    UpdateField<ObjectGuid, 0, 11> BnetAccount;
    UpdateField<uint64, 0, 12> GuildClubMemberID;
    UpdateField<ObjectGuid, 0, 13> LootTargetGUID;
    UpdateField<uint32, 0, 14> PlayerFlags;
    UpdateField<uint32, 0, 15> PlayerFlagsEx;
    UpdateField<uint32, 0, 16> GuildRankID;
    UpdateField<uint32, 0, 17> GuildDeleteDate;
    UpdateField<int32, 0, 18> GuildLevel;
    UpdateField<uint8, 0, 19> NativeSex;
    UpdateField<uint8, 0, 20> Inebriation;
    UpdateField<uint8, 0, 21> PvpTitle;
    UpdateField<uint8, 0, 22> ArenaFaction;
    UpdateField<uint32, 0, 23> DuelTeam;
    UpdateField<int32, 0, 24> GuildTimeStamp;
    UpdateField<int32, 0, 25> PlayerTitle;
    UpdateField<int32, 0, 26> FakeInebriation;
    UpdateField<uint32, 0, 27> VirtualPlayerRealm;
    UpdateField<uint32, 0, 28> CurrentSpecID;
    UpdateField<int32, 0, 29> CurrentCombatTraitConfigSubTreeID;
    UpdateField<int32, 0, 30> TaxiMountAnimKitID;
    UpdateField<uint8, 0, 31> CurrentBattlePetBreedQuality;
    UpdateField<int32, 32, 33> HonorLevel;
    UpdateField<int64, 32, 34> LogoutTime;
    UpdateField<std::string, 32, 35> Name;
    UpdateField<int32, 32, 36> OfferedAdvJournalQuestID;
    UpdateField<int32, 32, 37> OfferedScriptQuestID;
    UpdateField<int32, 32, 38> CurrentBattlePetSpeciesID;
    UpdateField<UF::CTROptions, 32, 39> CtrOptions;
    UpdateField<int32, 32, 40> CovenantID;
    UpdateField<int32, 32, 41> SoulbindID;
    UpdateField<WorldPackets::MythicPlus::DungeonScoreSummary, 32, 42> DungeonScore;
    UpdateField<UF::LeaverInfo, 32, 43> LeaverInfo;
    UpdateField<ObjectGuid, 32, 44> SpectateTarget;
    UpdateField<int32, 32, 45> WorldLootObjectInventorySwapSlot;
    OptionalUpdateField<UF::DeclinedNames, 32, 46> DeclinedNames;
    UpdateField<UF::CustomTabardInfo, 32, 47> PersonalTabard;
    UpdateField<UF::NPCAsPlayerInfo, 32, 48> NpcAsPlayerInfo;
    UpdateFieldArray<uint8, 2, 49, 50> PartyType;
    UpdateFieldArray<UF::QuestLog, 175, 52, 53> QuestLog;
    UpdateFieldArray<UF::VisibleItem, 19, 228, 229> VisibleItems;
    UpdateFieldArray<float, 6, 248, 249> AvgItemLevel;
    UpdateFieldArray<UF::ZonePlayerForcedReaction, 32, 255, 256> ForcedReactions;
    UpdateFieldArray<WorldPackets::Item::ItemInstance, 16, 288, 289> VisibleEquipableSpells;
    UpdateFieldArray<uint32, 19, 305, 306> PlunderstormItemDisplayID;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, Player const* owner, Player const* receiver) const;
    static void AppendAllowedFieldsMaskForFlag(Mask& allowedMaskForTarget, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags);
    static void FilterDisallowedFieldsMaskForFlag(Mask& changesMask, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags);
    void ClearChangesMask();
    bool IsQuestLogChangesMaskSkipped() const { return false; } // bandwidth savings aren't worth the cpu time
};

struct SkillInfo : public IsUpdateFieldStructureTag, public HasChangesMask<2101>
{
    UpdateFieldArray<uint16, 300, 0, 1> SkillLineID;
    UpdateFieldArray<uint16, 300, 0, 301> SkillStep;
    UpdateFieldArray<uint16, 300, 0, 601> SkillRank;
    UpdateFieldArray<uint16, 300, 0, 901> SkillStartingRank;
    UpdateFieldArray<uint16, 300, 0, 1201> SkillMaxRank;
    UpdateFieldArray<int16, 300, 0, 1501> SkillTempBonus;
    UpdateFieldArray<uint16, 300, 0, 1801> SkillPermBonus;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct BitVector : public IsUpdateFieldStructureTag, public HasChangesMask<2>
{
    DynamicUpdateField<uint64, 0, 1> Values;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct BitVectors : public IsUpdateFieldStructureTag, public HasChangesMask<15>
{
    UpdateFieldArray<UF::BitVector, 14, 0, 1> Values;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct PlayerDataElement : public IsUpdateFieldStructureTag
{
    uint32 Type = 0;
    float FloatValue = 0.0f;
    int64 Int64Value = 0;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(PlayerDataElement const& right) const;
    bool operator!=(PlayerDataElement const& right) const { return !(*this == right); }
};

struct RestInfo : public IsUpdateFieldStructureTag, public HasChangesMask<3>
{
    UpdateField<uint32, 0, 1> Threshold;
    UpdateField<uint8, 0, 2> StateID;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct PVPInfo : public IsUpdateFieldStructureTag, public HasChangesMask<19>
{
    UpdateField<bool, 0, 1> Disqualified;
    UpdateField<int8, 0, 2> Bracket;
    UpdateField<int32, 0, 3> PvpRatingID;
    UpdateField<uint32, 0, 4> WeeklyPlayed;
    UpdateField<uint32, 0, 5> WeeklyWon;
    UpdateField<uint32, 0, 6> SeasonPlayed;
    UpdateField<uint32, 0, 7> SeasonWon;
    UpdateField<uint32, 0, 8> Rating;
    UpdateField<uint32, 0, 9> WeeklyBestRating;
    UpdateField<uint32, 0, 10> LastWeeksBestRating;
    UpdateField<uint32, 0, 11> PvpTierID;
    UpdateField<uint32, 0, 12> WeeklyBestWinPvpTierID;
    UpdateField<uint32, 0, 13> SeasonBestRating;
    UpdateField<uint32, 0, 14> SeasonBestTier;
    UpdateField<uint32, 0, 15> WeeklyRoundsPlayed;
    UpdateField<uint32, 0, 16> WeeklyRoundsWon;
    UpdateField<uint32, 0, 17> SeasonRoundsPlayed;
    UpdateField<uint32, 0, 18> SeasonRoundsWon;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct CharacterRestriction : public IsUpdateFieldStructureTag
{
    int32 Field_0 = 0;
    int32 Field_4 = 0;
    int32 Field_8 = 0;
    uint32 Type = 0;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(CharacterRestriction const& right) const;
    bool operator!=(CharacterRestriction const& right) const { return !(*this == right); }
};

struct SpellPctModByLabel : public IsUpdateFieldStructureTag
{
    int32 ModIndex = 0;
    float ModifierValue = 0.0f;
    int32 LabelID = 0;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(SpellPctModByLabel const& right) const;
    bool operator!=(SpellPctModByLabel const& right) const { return !(*this == right); }
};

struct SpellFlatModByLabel : public IsUpdateFieldStructureTag
{
    int32 ModIndex = 0;
    int32 ModifierValue = 0;
    int32 LabelID = 0;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(SpellFlatModByLabel const& right) const;
    bool operator!=(SpellFlatModByLabel const& right) const { return !(*this == right); }
};

struct SpellPctPVPModByLabel : public IsUpdateFieldStructureTag
{
    int32 PvpModIndex = 0;
    float ModifierValue = 0.0f;
    int32 LabelID = 0;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(SpellPctPVPModByLabel const& right) const;
    bool operator!=(SpellPctPVPModByLabel const& right) const { return !(*this == right); }
};

struct SpellFlatPVPModByLabel : public IsUpdateFieldStructureTag
{
    int32 PvpModIndex = 0;
    int32 ModifierValue = 0;
    int32 LabelID = 0;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(SpellFlatPVPModByLabel const& right) const;
    bool operator!=(SpellFlatPVPModByLabel const& right) const { return !(*this == right); }
};

struct CompletedProject : public IsUpdateFieldStructureTag, public HasChangesMask<4>
{
    UpdateField<int64, 0, 1> FirstCompleted;
    UpdateField<uint32, 0, 2> ProjectID;
    UpdateField<uint32, 0, 3> CompletionCount;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct ResearchHistory : public IsUpdateFieldStructureTag, public HasChangesMask<2>
{
    DynamicUpdateField<UF::CompletedProject, 0, 1> CompletedProjects;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct MawPower : public IsUpdateFieldStructureTag
{
    int32 SpellID = 0;
    int32 MawPowerID = 0;
    int32 Stacks = 0;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(MawPower const& right) const;
    bool operator!=(MawPower const& right) const { return !(*this == right); }
};

struct MultiFloorExplore : public IsUpdateFieldStructureTag
{
    std::vector<int32> WorldMapOverlayIDs;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(MultiFloorExplore const& right) const;
    bool operator!=(MultiFloorExplore const& right) const { return !(*this == right); }
};

struct RecipeProgressionInfo : public IsUpdateFieldStructureTag
{
    uint16 RecipeProgressionGroupID = 0;
    uint16 Experience = 0;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(RecipeProgressionInfo const& right) const;
    bool operator!=(RecipeProgressionInfo const& right) const { return !(*this == right); }
};

struct LevelLinkInfo : public IsUpdateFieldStructureTag, public HasChangesMask<3>
{
    UpdateField<ObjectGuid, 0, 1> TargetGUID;
    UpdateField<int32, 0, 2> Level;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct QuestSession : public IsUpdateFieldStructureTag, public HasChangesMask<3>
{
    UpdateField<ObjectGuid, 0, 1> Owner;
    UpdateField<UF::BitVector, 0, 2> QuestCompleted;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct ReplayedQuest : public IsUpdateFieldStructureTag, public HasChangesMask<3>
{
    UpdateField<int32, 0, 1> QuestID;
    UpdateField<uint32, 0, 2> ReplayTime;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct TraitEntry : public IsUpdateFieldStructureTag
{
    int32 TraitNodeID = 0;
    int32 TraitNodeEntryID = 0;
    int32 Rank = 0;
    int32 GrantedRanks = 0;
    int32 BonusRanks = 0;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(TraitEntry const& right) const;
    bool operator!=(TraitEntry const& right) const { return !(*this == right); }
};

struct TraitSubTreeCache : public IsUpdateFieldStructureTag
{
    std::vector<UF::TraitEntry> Entries;
    int32 TraitSubTreeID = 0;
    uint32 Active = 0;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(TraitSubTreeCache const& right) const;
    bool operator!=(TraitSubTreeCache const& right) const { return !(*this == right); }
};

struct TraitConfig : public IsUpdateFieldStructureTag, public HasChangesMask<15>
{
    DynamicUpdateField<UF::TraitEntry, 0, 1> Entries;
    DynamicUpdateField<UF::TraitSubTreeCache, 0, 2> SubTrees;
    UpdateField<int32, 0, 3> ID;
    UpdateField<std::string, 4, 5> Name;
    UpdateField<int32, 4, 6> Type;
    UpdateField<int32, 4, 7> SkillLineID;
    UpdateField<int32, 8, 9> ChrSpecializationID;
    UpdateField<int32, 8, 10> CombatConfigFlags;
    UpdateField<int32, 8, 11> LocalIdentifier;
    UpdateField<int32, 12, 13> TraitSystemID;
    UpdateField<int32, 12, 14> VariationID;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct CraftingOrderItem : public IsUpdateFieldStructureTag, public HasChangesMask<7>
{
    UpdateField<uint64, -1, 0> OrderItemID;
    UpdateField<ObjectGuid, -1, 1> ItemGUID;
    UpdateField<ObjectGuid, -1, 2> OwnerGUID;
    UpdateField<int32, -1, 3> ItemID;
    UpdateField<uint32, -1, 4> Quantity;
    UpdateField<int32, -1, 5> ReagentQuality;
    OptionalUpdateField<uint8, -1, 6> DataSlotIndex;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct CraftingOrderCustomer : public IsUpdateFieldStructureTag, public HasChangesMask<2>
{
    UpdateField<ObjectGuid, -1, 0> CustomerGUID;
    UpdateField<ObjectGuid, -1, 1> CustomerAccountGUID;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct CraftingOrderNpcCustomer : public IsUpdateFieldStructureTag, public HasChangesMask<2>
{
    UpdateField<int64, -1, 0> NpcCraftingOrderCustomerID;
    UpdateField<int32, -1, 1> RealmAddress;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct CraftingOrderData : public IsUpdateFieldStructureTag, public HasChangesMask<26>
{
    DynamicUpdateField<UF::CraftingOrderItem, 0, 1> Reagents;
    UpdateField<int32, 0, 2> Field_0;
    UpdateField<uint64, 0, 3> OrderID;
    UpdateField<int32, 0, 4> SkillLineAbilityID;
    UpdateField<int32, 0, 5> OrderState;
    UpdateField<uint8, 6, 7> OrderType;
    UpdateField<uint8, 6, 8> MinQuality;
    UpdateField<int64, 6, 9> ExpirationTime;
    UpdateField<int64, 6, 10> ClaimEndTime;
    UpdateField<int64, 6, 11> TipAmount;
    UpdateField<int64, 12, 13> ConsortiumCut;
    UpdateField<uint32, 12, 14> Flags;
    UpdateField<ObjectGuid, 12, 15> CrafterGUID;
    UpdateField<ObjectGuid, 12, 16> PersonalCrafterGUID;
    UpdateField<int32, 12, 17> NpcCraftingOrderSetID;
    UpdateField<int32, 18, 19> NpcTreasureID;
    UpdateField<std::string, 18, 20> CustomerNotes;
    OptionalUpdateField<UF::CraftingOrderCustomer, 18, 21> Customer;
    OptionalUpdateField<UF::CraftingOrderNpcCustomer, 18, 22> NpcCustomer;
    OptionalUpdateField<UF::CraftingOrderItem, 18, 23> OutputItem;
    OptionalUpdateField<WorldPackets::Item::ItemInstance, 24, 25> OutputItemData;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct CraftingOrder : public IsUpdateFieldStructureTag, public HasChangesMask<4>
{
    DynamicUpdateField<WorldPackets::Item::ItemEnchantData, -1, 0> Enchantments;
    DynamicUpdateField<WorldPackets::Item::ItemGemData, -1, 1> Gems;
    UpdateField<UF::CraftingOrderData, -1, 2> Data;
    OptionalUpdateField<WorldPackets::Item::ItemInstance, -1, 3> RecraftItemInfo;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct PersonalCraftingOrderCount : public IsUpdateFieldStructureTag, public HasChangesMask<2>
{
    UpdateField<int32, -1, 0> ProfessionID;
    UpdateField<uint32, -1, 1> Count;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct NPCCraftingOrderInfo : public IsUpdateFieldStructureTag, public HasChangesMask<4>
{
    UpdateField<uint64, -1, 0> OrderID;
    UpdateField<int32, -1, 1> NpcCraftingOrderSetID;
    UpdateField<int32, -1, 2> NpcTreasureID;
    UpdateField<int32, -1, 3> NpcCraftingOrderCustomerID;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct CategoryCooldownMod : public IsUpdateFieldStructureTag
{
    int32 SpellCategoryID = 0;
    int32 ModCooldown = 0;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(CategoryCooldownMod const& right) const;
    bool operator!=(CategoryCooldownMod const& right) const { return !(*this == right); }
};

struct WeeklySpellUse : public IsUpdateFieldStructureTag
{
    int32 SpellCategoryID = 0;
    uint8 Uses = 0;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(WeeklySpellUse const& right) const;
    bool operator!=(WeeklySpellUse const& right) const { return !(*this == right); }
};

struct StablePetInfo : public IsUpdateFieldStructureTag, public HasChangesMask<9>
{
    UpdateField<uint32, 0, 1> PetSlot;
    UpdateField<uint32, 0, 2> PetNumber;
    UpdateField<uint32, 0, 3> CreatureID;
    UpdateField<uint32, 0, 4> DisplayID;
    UpdateField<uint32, 0, 5> ExperienceLevel;
    UpdateField<std::string, 0, 6> Name;
    UpdateField<uint8, 0, 7> PetFlags;
    UpdateField<uint32, 0, 8> Specialization;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct StableInfo : public IsUpdateFieldStructureTag, public HasChangesMask<3>
{
    DynamicUpdateField<UF::StablePetInfo, 0, 1> Pets;
    UpdateField<ObjectGuid, 0, 2> StableMaster;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct CollectableSourceTrackedData : public IsUpdateFieldStructureTag, public HasChangesMask<4>
{
    UpdateField<int32, 0, 1> TargetType;
    UpdateField<int32, 0, 2> TargetID;
    UpdateField<int32, 0, 3> CollectableSourceInfoID;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct BankTabSettings : public IsUpdateFieldStructureTag, public HasChangesMask<4>
{
    UpdateField<std::string, -1, 0> Name;
    UpdateField<std::string, -1, 1> Icon;
    UpdateField<std::string, -1, 2> Description;
    UpdateField<int32, -1, 3> DepositFlags;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct WalkInData : public IsUpdateFieldStructureTag
{
    int32 MapID = 0;
    int64 Field_8 = 0;
    uint32 Type = 0;
    ObjectGuid Field_18;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(WalkInData const& right) const;
    bool operator!=(WalkInData const& right) const { return !(*this == right); }
};

struct DelveData : public IsUpdateFieldStructureTag
{
    std::vector<ObjectGuid> Owners;
    int32 Field_0 = 0;
    uint64 Field_8 = 0;
    int32 Field_10 = 0;
    int32 SpellID = 0;
    uint32 Started = 0;                                                         // Restricts rewards to players in m_owners if set to true. Intended to prevent rewarwding players that join in-progress delve?

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(DelveData const& right) const;
    bool operator!=(DelveData const& right) const { return !(*this == right); }
};

struct ChallengeModeData : public IsUpdateFieldStructureTag
{
    int32 MapID = 0;
    int32 InitialPlayerCount = 0;
    uint64 InstanceID = 0;
    int64 StartTime = 0;
    ObjectGuid KeystoneOwnerGUID;
    ObjectGuid LeaverGUID;
    int64 InstanceAbandonVoteCooldown = 0;
    uint32 IsActive = 0;
    uint32 HasRestrictions = 0;
    uint32 CanVoteAbandon = 0;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(ChallengeModeData const& right) const;
    bool operator!=(ChallengeModeData const& right) const { return !(*this == right); }
};

struct TransmogOutfitDataInfo : public IsUpdateFieldStructureTag, public HasChangesMask<4>
{
    UpdateField<bool, -1, 0> SituationsEnabled;
    UpdateField<uint8, -1, 1> SetType;
    UpdateField<std::string, -1, 2> Name;
    UpdateField<uint32, -1, 3> Icon;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct TransmogOutfitSituationInfo : public IsUpdateFieldStructureTag, public HasChangesMask<4>
{
    UpdateField<uint32, -1, 0> SituationID;
    UpdateField<uint32, -1, 1> SpecID;
    UpdateField<uint32, -1, 2> LoadoutID;
    UpdateField<uint32, -1, 3> EquipmentSetID;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct TransmogOutfitSlotData : public IsUpdateFieldStructureTag, public HasChangesMask<7>
{
    UpdateField<int8, -1, 0> Slot;
    UpdateField<uint8, -1, 1> SlotOption;
    UpdateField<uint32, -1, 2> ItemModifiedAppearanceID;
    UpdateField<uint8, -1, 3> AppearanceDisplayType;
    UpdateField<uint32, -1, 4> SpellItemEnchantmentID;
    UpdateField<uint8, -1, 5> IllusionDisplayType;
    UpdateField<uint32, -1, 6> Flags;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct TransmogOutfitData : public IsUpdateFieldStructureTag, public HasChangesMask<5>
{
    DynamicUpdateField<UF::TransmogOutfitSituationInfo, -1, 0> Situations;
    DynamicUpdateField<UF::TransmogOutfitSlotData, -1, 1> Slots;
    UpdateField<uint32, -1, 2> Id;
    UpdateField<UF::TransmogOutfitDataInfo, -1, 3> OutfitInfo;
    UpdateField<uint32, -1, 4> Flags;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct TransmogOutfitMetadata : public IsUpdateFieldStructureTag
{
    bool Locked = false;
    uint8 SituationTrigger = 0;
    uint32 TransmogOutfitID = 0;
    uint8 StampedOptionMainHand = 0;
    uint8 StampedOptionOffHand = 0;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(TransmogOutfitMetadata const& right) const;
    bool operator!=(TransmogOutfitMetadata const& right) const { return !(*this == right); }
};

struct Research : public IsUpdateFieldStructureTag
{
    int16 ResearchProjectID = 0;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(Research const& right) const;
    bool operator!=(Research const& right) const { return !(*this == right); }
};

struct ActivePlayerData : public IsUpdateFieldStructureTag, public HasChangesMask<397>
{
    UpdateField<bool, 0, 1> BackpackAutoSortDisabled;
    UpdateField<bool, 0, 2> BackpackSellJunkDisabled;
    UpdateField<bool, 0, 3> BankAutoSortDisabled;
    UpdateField<bool, 0, 4> SortBagsRightToLeft;
    UpdateField<bool, 0, 5> InsertItemsLeftToRight;
    UpdateField<bool, 0, 6> HasPerksProgramPendingReward;
    UpdateFieldArray<DynamicUpdateFieldBase<uint16>, 1, 50, 51> ResearchSites;
    UpdateFieldArray<DynamicUpdateFieldBase<uint32>, 1, 52, 53> ResearchSiteProgress;
    UpdateFieldArray<DynamicUpdateFieldBase<UF::Research>, 1, 54, 55> Research;
    DynamicUpdateField<uint64, 0, 7> KnownTitles;
    DynamicUpdateField<UF::PlayerDataElement, 0, 8> CharacterDataElements;
    DynamicUpdateField<UF::PlayerDataElement, 0, 9> AccountDataElements;
    DynamicUpdateField<int32, 0, 11> DailyQuestsCompleted;
    DynamicUpdateField<int32, 0, 12> Field_1328;
    DynamicUpdateField<int32, 0, 13> AvailableQuestLineXQuestIDs;
    DynamicUpdateField<int32, 0, 14> Heirlooms;
    DynamicUpdateField<uint32, 0, 15> HeirloomFlags;
    DynamicUpdateField<int32, 0, 16> Toys;
    DynamicUpdateField<uint32, 0, 17> ToyFlags;
    DynamicUpdateField<uint32, 0, 18> Transmog;
    DynamicUpdateField<int32, 0, 19> ConditionalTransmog;
    DynamicUpdateField<int32, 0, 20> SelfResSpells;
    DynamicUpdateField<uint32, 0, 21> RuneforgePowers;
    DynamicUpdateField<uint32, 0, 22> TransmogIllusions;
    DynamicUpdateField<uint32, 0, 23> WarbandScenes;
    DynamicUpdateField<uint32, 0, 24> HouseRooms;
    DynamicUpdateField<uint32, 0, 25> HouseExteriorComponents;
    DynamicUpdateField<uint32, 0, 26> HouseThemes;
    DynamicUpdateField<uint32, 0, 27> HouseRoomComponentTextures;
    DynamicUpdateField<uint32, 0, 28> HouseTypes;
    DynamicUpdateField<int32, 0, 29> Field_1980;
    DynamicUpdateField<UF::SpellPctModByLabel, 0, 31> SpellPctModByLabel;
    DynamicUpdateField<UF::SpellFlatModByLabel, 32, 33> SpellFlatModByLabel;
    DynamicUpdateField<UF::SpellPctPVPModByLabel, 32, 34> SpellPctModPVPByLabel;
    DynamicUpdateField<UF::SpellFlatPVPModByLabel, 32, 35> SpellFlatModPVPByLabel;
    DynamicUpdateField<UF::MawPower, 32, 36> MawPowers;
    DynamicUpdateField<UF::MultiFloorExplore, 32, 37> MultiFloorExploration;
    DynamicUpdateField<UF::RecipeProgressionInfo, 32, 38> RecipeProgression;
    DynamicUpdateField<UF::ReplayedQuest, 32, 39> ReplayedQuests;
    DynamicUpdateField<UF::QuestLog, 32, 40> TaskQuests;
    DynamicUpdateField<int32, 32, 41> DisabledSpells;
    DynamicUpdateField<UF::PersonalCraftingOrderCount, 32, 43> PersonalCraftingOrderCounts;
    DynamicUpdateField<UF::NPCCraftingOrderInfo, 32, 44> NpcCraftingOrders;
    DynamicUpdateField<UF::CategoryCooldownMod, 32, 45> CategoryCooldownMods;
    DynamicUpdateField<UF::WeeklySpellUse, 32, 46> WeeklySpellUses;
    DynamicUpdateField<UF::CollectableSourceTrackedData, 32, 47> TrackedCollectableSources;
    DynamicUpdateField<UF::PVPInfo, 0, 10> PvpInfo;
    DynamicUpdateField<UF::CharacterRestriction, 0, 30> CharacterRestrictions;
    DynamicUpdateField<UF::CraftingOrder, 32, 42> CraftingOrders;
    DynamicUpdateField<UF::BankTabSettings, 32, 48> CharacterBankTabSettings;
    DynamicUpdateField<UF::BankTabSettings, 32, 49> AccountBankTabSettings;
    UpdateField<ObjectGuid, 32, 56> FarsightObject;
    UpdateField<ObjectGuid, 32, 57> SummonedBattlePetGUID;
    UpdateField<uint64, 32, 58> Coinage;
    UpdateField<uint64, 32, 59> AccountBankCoinage;
    UpdateField<int32, 32, 60> XP;
    UpdateField<int32, 32, 61> NextLevelXP;
    UpdateField<int32, 32, 62> TrialXP;
    UpdateField<UF::SkillInfo, 32, 63> Skill;
    UpdateField<int32, 32, 64> CharacterPoints;
    UpdateField<int32, 32, 65> MaxTalentTiers;
    UpdateField<uint32, 32, 66> TrackCreatureMask;
    UpdateField<float, 32, 67> MainhandExpertise;
    UpdateField<float, 32, 68> OffhandExpertise;
    UpdateField<float, 32, 69> RangedExpertise;
    UpdateField<float, 70, 71> CombatRatingExpertise;
    UpdateField<float, 70, 72> BlockPercentage;
    UpdateField<float, 70, 73> DodgePercentage;
    UpdateField<float, 70, 74> DodgePercentageFromAttribute;
    UpdateField<float, 70, 75> ParryPercentage;
    UpdateField<float, 70, 76> ParryPercentageFromAttribute;
    UpdateField<float, 70, 77> CritPercentage;
    UpdateField<float, 70, 78> RangedCritPercentage;
    UpdateField<float, 70, 79> OffhandCritPercentage;
    UpdateField<float, 70, 80> SpellCritPercentage;
    UpdateField<int32, 70, 81> ShieldBlock;
    UpdateField<float, 70, 82> ShieldBlockCritPercentage;
    UpdateField<float, 70, 83> Mastery;
    UpdateField<float, 70, 84> Speed;
    UpdateField<float, 70, 85> Avoidance;
    UpdateField<float, 70, 86> Sturdiness;
    UpdateField<int32, 70, 87> Versatility;
    UpdateField<float, 70, 88> VersatilityBonus;
    UpdateField<float, 70, 89> PvpPowerDamage;
    UpdateField<float, 70, 90> PvpPowerHealing;
    UpdateField<UF::BitVectors, 70, 91> BitVectors;
    UpdateField<int32, 70, 92> ModHealingDonePos;
    UpdateField<float, 70, 93> ModHealingPercent;
    UpdateField<float, 70, 94> ModPeriodicHealingDonePercent;
    UpdateField<float, 70, 95> ModSpellPowerPercent;
    UpdateField<float, 70, 96> ModResiliencePercent;
    UpdateField<float, 70, 97> OverrideSpellPowerByAPPercent;
    UpdateField<float, 70, 98> OverrideAPBySpellPowerPercent;
    UpdateField<int32, 70, 99> ModTargetResistance;
    UpdateField<int32, 70, 100> ModTargetPhysicalResistance;
    UpdateField<uint32, 70, 101> LocalFlags;
    UpdateField<uint8, 102, 103> GrantableLevels;
    UpdateField<uint8, 102, 104> MultiActionBars;
    UpdateField<uint8, 102, 105> LifetimeMaxRank;
    UpdateField<uint8, 102, 106> NumRespecs;
    UpdateField<uint32, 102, 107> PvpMedals;
    UpdateField<uint16, 102, 108> TodayHonorableKills;
    UpdateField<uint16, 102, 109> YesterdayHonorableKills;
    UpdateField<uint32, 102, 110> LifetimeHonorableKills;
    UpdateField<int32, 102, 111> WatchedFactionIndex;
    UpdateField<int32, 102, 112> MaxLevel;
    UpdateField<int32, 102, 113> ScalingPlayerLevelDelta;
    UpdateField<int32, 102, 114> MaxCreatureScalingLevel;
    UpdateField<uint8, 102, 115> TransmogCostMinScalingLevel;
    UpdateField<int32, 102, 116> PetSpellPower;
    UpdateField<float, 102, 117> UiHitModifier;
    UpdateField<float, 102, 118> UiSpellHitModifier;
    UpdateField<int32, 102, 119> HomeRealmTimeOffset;
    UpdateField<float, 102, 120> ModPetHaste;
    UpdateField<int8, 102, 121> JailersTowerLevelMax;
    UpdateField<int8, 102, 122> JailersTowerLevel;
    UpdateField<uint8, 102, 123> LocalRegenFlags;
    UpdateField<uint8, 102, 124> AuraVision;
    UpdateField<uint8, 102, 125> NumBackpackSlots;
    UpdateField<int32, 102, 126> OverrideSpellsID;
    UpdateField<uint16, 102, 127> LootSpecID;
    UpdateField<uint32, 102, 128> OverrideZonePVPType;
    UpdateField<int32, 102, 129> Honor;
    UpdateField<int32, 102, 130> HonorNextLevel;
    UpdateField<int32, 102, 131> PerksProgramCurrency;
    UpdateField<uint8, 102, 132> NumBankSlots;
    UpdateField<uint8, 102, 133> NumCharacterBankTabs;
    UpdateField<uint8, 134, 135> NumAccountBankTabs;
    UpdateField<UF::ResearchHistory, 134, 136> ResearchHistory;
    UpdateField<WorldPackets::PerksProgram::PerksVendorItem, 134, 137> FrozenPerksVendorItem;
    UpdateField<UF::LevelLinkInfo, 134, 139> LevelLinkInfo;
    OptionalUpdateField<UF::QuestSession, 134, 138> QuestSession;
    UpdateField<int32, 134, 140> UiChromieTimeExpansionID;
    UpdateField<int32, 134, 141> TimerunningSeasonID;
    UpdateField<int32, 134, 142> TransportServerTime;
    UpdateField<uint32, 134, 143> WeeklyRewardsPeriodSinceOrigin;               // week count since Cfg_RegionsEntry::ChallengeOrigin
    UpdateField<int16, 134, 144> DEBUGSoulbindConduitRank;
    UpdateField<WorldPackets::MythicPlus::DungeonScoreData, 134, 145> DungeonScore;
    MapUpdateField<int32, UF::TraitConfig, 134, 146> TraitConfigs;
    UpdateField<uint32, 134, 147> ActiveCombatTraitConfigID;
    UpdateField<int32, 134, 148> ItemUpgradeHighOnehandWeaponItemID;
    UpdateField<int32, 134, 149> ItemUpgradeHighFingerItemID;
    UpdateField<float, 134, 150> ItemUpgradeHighFingerWatermark;
    UpdateField<int32, 134, 151> ItemUpgradeHighTrinketItemID;
    UpdateField<float, 134, 152> ItemUpgradeHighTrinketWatermark;
    UpdateField<uint64, 134, 153> LootHistoryInstanceID;
    OptionalUpdateField<UF::StableInfo, 134, 154> PetStable;
    UpdateField<uint8, 134, 155> RequiredMountCapabilityFlags;
    OptionalUpdateField<UF::WalkInData, 134, 156> WalkInData;
    OptionalUpdateField<UF::DelveData, 134, 157> DelveData;
    OptionalUpdateField<UF::ChallengeModeData, 134, 158> ChallengeModeData;
    MapUpdateField<uint32, UF::TransmogOutfitData, 134, 159> TransmogOutfits;
    UpdateField<UF::TransmogOutfitData, 134, 160> ViewedOutfit;
    UpdateField<UF::TransmogOutfitMetadata, 134, 161> TransmogMetadata;
    UpdateFieldArray<ObjectGuid, 105, 162, 163> InvSlots;
    UpdateFieldArray<UF::RestInfo, 2, 268, 269> RestInfo;
    UpdateFieldArray<int32, 7, 271, 272> ModDamageDonePos;
    UpdateFieldArray<int32, 7, 271, 279> ModDamageDoneNeg;
    UpdateFieldArray<float, 7, 271, 286> ModDamageDonePercent;
    UpdateFieldArray<float, 7, 271, 293> ModHealingDonePercent;
    UpdateFieldArray<float, 3, 300, 301> WeaponDmgMultipliers;
    UpdateFieldArray<float, 3, 300, 304> WeaponAtkSpeedMultipliers;
    UpdateFieldArray<uint32, 12, 307, 308> BuybackPrice;
    UpdateFieldArray<int64, 12, 307, 320> BuybackTimestamp;
    UpdateFieldArray<int32, 32, 332, 333> CombatRatings;
    UpdateFieldArray<uint32, 4, 365, 366> NoReagentCostMask;
    UpdateFieldArray<int32, 2, 370, 371> ProfessionSkillLine;
    UpdateFieldArray<uint32, 5, 373, 374> BagSlotFlags;
    UpdateFieldArray<float, 17, 379, 380> ItemUpgradeHighWatermark;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct GameObjectAssistActionData : public IsUpdateFieldStructureTag
{
    std::string PlayerName;
    std::string MonsterName;
    uint32 VirtualRealmAddress = 0;
    uint8 Sex = 0;
    int64 Time = 0;
    int32 DelveTier = 0;

    void WriteCreate(ByteBuffer& data, GameObject const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, GameObject const* owner, Player const* receiver) const;
    bool operator==(GameObjectAssistActionData const& right) const;
    bool operator!=(GameObjectAssistActionData const& right) const { return !(*this == right); }
};

struct GameObjectData : public IsUpdateFieldStructureTag, public HasChangesMask<26>
{
    UpdateField<std::vector<uint32>, 0, 1> StateWorldEffectIDs;
    struct StateWorldEffectIDsTag : ViewerDependentValueTag<std::vector<uint32>> {};
    DynamicUpdateField<int32, 0, 2> EnableDoodadSets;
    DynamicUpdateField<int32, 0, 3> WorldEffects;
    UpdateField<int32, 0, 4> DisplayID;
    UpdateField<uint32, 0, 5> SpellVisualID;
    UpdateField<uint32, 0, 6> StateSpellVisualID;
    struct StateSpellVisualIDTag : ViewerDependentValueTag<uint32> {};
    UpdateField<uint32, 0, 7> SpawnTrackingStateAnimID;
    struct SpawnTrackingStateAnimIDTag : ViewerDependentValueTag<uint32> {};
    UpdateField<uint32, 0, 8> SpawnTrackingStateAnimKitID;
    struct SpawnTrackingStateAnimKitIDTag : ViewerDependentValueTag<uint32> {};
    UpdateField<uint32, 0, 9> StateWorldEffectsQuestObjectiveID;
    struct StateWorldEffectsQuestObjectiveIDTag : ViewerDependentValueTag<uint32> {};
    UpdateField<ObjectGuid, 0, 10> CreatedBy;
    UpdateField<ObjectGuid, 0, 11> GuildGUID;
    UpdateField<uint32, 0, 12> Flags;
    struct FlagsTag : ViewerDependentValueTag<uint32> {};
    UpdateField<QuaternionData, 0, 13> ParentRotation;
    UpdateField<int32, 0, 14> FactionTemplate;
    UpdateField<int8, 0, 15> State;
    struct StateTag : ViewerDependentValueTag<int8> {};
    UpdateField<int8, 0, 16> TypeID;
    UpdateField<uint8, 0, 17> PercentHealth;
    UpdateField<uint32, 0, 18> ArtKit;
    UpdateField<uint32, 0, 19> CustomParam;
    UpdateField<int32, 0, 20> Level;
    UpdateField<uint32, 0, 21> AnimGroupInstance;
    UpdateField<uint32, 0, 22> UiWidgetItemID;
    UpdateField<uint32, 0, 23> UiWidgetItemQuality;
    UpdateField<uint32, 0, 24> UiWidgetItemCount;
    OptionalUpdateField<UF::GameObjectAssistActionData, 0, 25> AssistActionData;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, GameObject const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, GameObject const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, GameObject const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct DynamicObjectData : public IsUpdateFieldStructureTag, public HasChangesMask<7>
{
    UpdateField<ObjectGuid, 0, 1> Caster;
    UpdateField<uint8, 0, 2> Type;
    UpdateField<UF::SpellCastVisual, 0, 3> SpellVisual;
    UpdateField<int32, 0, 4> SpellID;
    UpdateField<float, 0, 5> Radius;
    UpdateField<uint32, 0, 6> CastTime;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, DynamicObject const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, DynamicObject const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, DynamicObject const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct CorpseData : public IsUpdateFieldStructureTag, public HasChangesMask<33>
{
    DynamicUpdateField<UF::ChrCustomizationChoice, 0, 1> Customizations;
    UpdateField<uint32, 0, 2> DynamicFlags;
    UpdateField<ObjectGuid, 0, 3> Owner;
    UpdateField<ObjectGuid, 0, 4> PartyGUID;
    UpdateField<ObjectGuid, 0, 5> GuildGUID;
    UpdateField<uint32, 0, 6> DisplayID;
    UpdateField<uint8, 0, 7> RaceID;
    UpdateField<uint8, 0, 8> Sex;
    UpdateField<uint8, 0, 9> Class;
    UpdateField<uint32, 0, 10> Flags;
    UpdateField<int32, 0, 11> FactionTemplate;
    UpdateField<uint32, 0, 12> StateSpellVisualKitID;
    UpdateFieldArray<uint32, 19, 13, 14> Items;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Corpse const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Corpse const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, Corpse const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct ScaleCurve : public IsUpdateFieldStructureTag, public HasChangesMask<7>
{
    UpdateField<bool, 0, 1> OverrideActive;
    UpdateField<uint32, 0, 2> StartTimeOffset;
    UpdateField<uint32, 0, 3> ParameterCurve;
    UpdateFieldArray<TaggedPosition<Position::XY>, 2, 4, 5> Points;

    void WriteCreate(ByteBuffer& data, AreaTrigger const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, AreaTrigger const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct VisualAnim : public IsUpdateFieldStructureTag, public HasChangesMask<5>
{
    UpdateField<bool, 0, 1> IsDecay;
    OptionalUpdateField<int16, 0, 2> AnimationDataID;
    UpdateField<uint32, 0, 3> AnimKitID;
    UpdateField<uint32, 0, 4> AnimProgress;

    void WriteCreate(ByteBuffer& data, AreaTrigger const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, AreaTrigger const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct ForceSetAreaTriggerPositionAndRotation : public IsUpdateFieldStructureTag
{
    ObjectGuid TriggerGUID;
    TaggedPosition<Position::XYZ> Pos;
    QuaternionData Rotation;

    void WriteCreate(ByteBuffer& data, AreaTrigger const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, AreaTrigger const* owner, Player const* receiver) const;
    bool operator==(ForceSetAreaTriggerPositionAndRotation const& right) const;
    bool operator!=(ForceSetAreaTriggerPositionAndRotation const& right) const { return !(*this == right); }
};

struct AreaTriggerActionSetPeriodModifier : public IsUpdateFieldStructureTag, public HasChangesMask<3>
{
    UpdateField<int32, 0, 1> Field_0;
    UpdateField<float, 0, 2> Field_4;

    void WriteCreate(ByteBuffer& data, AreaTrigger const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, AreaTrigger const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct AreaTriggerSplineCalculator : public IsUpdateFieldStructureTag, public HasChangesMask<3>
{
    UpdateField<bool, 0, 1> Catmullrom;
    DynamicUpdateField<TaggedPosition<Position::XYZ>, 0, 2> Points;

    void WriteCreate(ByteBuffer& data, AreaTrigger const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, AreaTrigger const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct AreaTriggerOrbit : public IsUpdateFieldStructureTag, public HasChangesMask<7>
{
    UpdateField<bool, 0, 1> CounterClockwise;
    UpdateField<TaggedPosition<Position::XYZ>, 0, 2> Center;
    UpdateField<float, 0, 3> Radius;
    UpdateField<float, 0, 4> InitialAngle;
    UpdateField<float, 0, 5> BlendFromRadius;
    UpdateField<int32, 0, 6> ExtraTimeForBlending;

    void WriteCreate(ByteBuffer& data, AreaTrigger const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, AreaTrigger const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct AreaTriggerMovementScript : public IsUpdateFieldStructureTag, public HasChangesMask<4>
{
    UpdateField<int32, 0, 1> SpellScriptID;
    UpdateField<TaggedPosition<Position::XYZ>, 0, 2> Center;
    UpdateField<uint32, 0, 3> CreationTime;

    void WriteCreate(ByteBuffer& data, AreaTrigger const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, AreaTrigger const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct AreaTriggerSphere : public IsUpdateFieldStructureTag, public HasChangesMask<3>
{
    UpdateField<float, 0, 1> Radius;
    UpdateField<float, 0, 2> RadiusTarget;

    void WriteCreate(ByteBuffer& data, AreaTrigger const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, AreaTrigger const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct AreaTriggerBox : public IsUpdateFieldStructureTag, public HasChangesMask<3>
{
    UpdateField<TaggedPosition<Position::XYZ>, 0, 1> Extents;
    UpdateField<TaggedPosition<Position::XYZ>, 0, 2> ExtentsTarget;

    void WriteCreate(ByteBuffer& data, AreaTrigger const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, AreaTrigger const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct AreaTriggerPolygon : public IsUpdateFieldStructureTag, public HasChangesMask<5>
{
    DynamicUpdateField<TaggedPosition<Position::XY>, 0, 1> Vertices;
    DynamicUpdateField<TaggedPosition<Position::XY>, 0, 2> VerticesTarget;
    UpdateField<float, 0, 3> Height;
    UpdateField<float, 0, 4> HeightTarget;

    void WriteCreate(ByteBuffer& data, AreaTrigger const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, AreaTrigger const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct AreaTriggerCylinder : public IsUpdateFieldStructureTag, public HasChangesMask<7>
{
    UpdateField<float, 0, 1> Radius;
    UpdateField<float, 0, 2> RadiusTarget;
    UpdateField<float, 0, 3> Height;
    UpdateField<float, 0, 4> HeightTarget;
    UpdateField<float, 0, 5> LocationZOffset;
    UpdateField<float, 0, 6> LocationZOffsetTarget;

    void WriteCreate(ByteBuffer& data, AreaTrigger const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, AreaTrigger const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct AreaTriggerDisk : public IsUpdateFieldStructureTag, public HasChangesMask<9>
{
    UpdateField<float, 0, 1> InnerRadius;
    UpdateField<float, 0, 2> InnerRadiusTarget;
    UpdateField<float, 0, 3> OuterRadius;
    UpdateField<float, 0, 4> OuterRadiusTarget;
    UpdateField<float, 0, 5> Height;
    UpdateField<float, 0, 6> HeightTarget;
    UpdateField<float, 0, 7> LocationZOffset;
    UpdateField<float, 0, 8> LocationZOffsetTarget;

    void WriteCreate(ByteBuffer& data, AreaTrigger const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, AreaTrigger const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct AreaTriggerBoundedPlane : public IsUpdateFieldStructureTag, public HasChangesMask<3>
{
    UpdateField<TaggedPosition<Position::XY>, 0, 1> Extents;
    UpdateField<TaggedPosition<Position::XY>, 0, 2> ExtentsTarget;

    void WriteCreate(ByteBuffer& data, AreaTrigger const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, AreaTrigger const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct AreaTriggerData : public IsUpdateFieldStructureTag, public HasChangesMask<37>
{
    UpdateField<UF::ScaleCurve, 0, 1> OverrideScaleCurve;
    UpdateField<UF::ScaleCurve, 0, 2> ExtraScaleCurve;
    UpdateField<UF::ScaleCurve, 0, 3> OverrideMoveCurveX;
    UpdateField<UF::ScaleCurve, 0, 4> OverrideMoveCurveY;
    UpdateField<UF::ScaleCurve, 0, 5> OverrideMoveCurveZ;
    UpdateField<ObjectGuid, 0, 6> Caster;
    UpdateField<uint32, 0, 7> Duration;
    UpdateField<uint32, 0, 8> TimeToTarget;
    UpdateField<uint32, 0, 9> TimeToTargetScale;
    UpdateField<uint32, 0, 10> TimeToTargetExtraScale;
    UpdateField<uint32, 0, 11> TimeToTargetPos;                                 // Linked to m_overrideMoveCurve
    UpdateField<int32, 0, 12> SpellID;
    UpdateField<int32, 0, 13> SpellForVisuals;
    UpdateField<UF::SpellCastVisual, 0, 14> SpellVisual;
    UpdateField<float, 0, 15> BoundsRadius2D;
    UpdateField<uint32, 0, 16> DecalPropertiesID;
    UpdateField<ObjectGuid, 0, 17> CreatingEffectGUID;
    UpdateField<ObjectGuid, 0, 18> OrbitPathTarget;
    UpdateField<TaggedPosition<Position::XYZ>, 0, 19> RollPitchYaw;
    UpdateField<int32, 0, 20> PositionalSoundKitID;
    UpdateField<uint32, 0, 21> MovementStartTime;
    UpdateField<uint32, 0, 22> CreationTime;
    UpdateField<float, 0, 23> ZOffset;
    OptionalUpdateField<TaggedPosition<Position::XYZ>, 0, 24> TargetRollPitchYaw;
    UpdateField<uint32, 0, 25> Flags;
    UpdateField<UF::VisualAnim, 0, 26> VisualAnim;
    UpdateField<uint32, 0, 27> ScaleCurveId;
    UpdateField<uint32, 0, 28> FacingCurveId;
    UpdateField<uint32, 0, 29> MorphCurveId;
    UpdateField<uint32, 0, 30> MoveCurveId;
    UpdateField<float, 0, 31> Facing;
    OptionalUpdateField<UF::ForceSetAreaTriggerPositionAndRotation, 32, 33> ForcedPositionAndRotation;
    UpdateField<int32, 32, 34> PathType;
    UpdateField<uint8, 32, 35> ShapeType;
    UpdateField<UF::AreaTriggerActionSetPeriodModifier, 32, 36> PeriodModifier;
    VariantUpdateField<32, 34, UF::AreaTriggerSplineCalculator, UF::AreaTriggerOrbit, UF::AreaTriggerMovementScript> PathData;
    VariantUpdateField<32, 35, UF::AreaTriggerSphere, UF::AreaTriggerBox, UF::AreaTriggerPolygon, UF::AreaTriggerCylinder, UF::AreaTriggerDisk, UF::AreaTriggerBoundedPlane> ShapeData;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, AreaTrigger const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, AreaTrigger const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, AreaTrigger const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct SceneObjectData : public IsUpdateFieldStructureTag, public HasChangesMask<5>
{
    UpdateField<int32, 0, 1> ScriptPackageID;
    UpdateField<uint32, 0, 2> RndSeedVal;
    UpdateField<ObjectGuid, 0, 3> CreatedBy;
    UpdateField<uint32, 0, 4> SceneType;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Object const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Object const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, Object const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct ConversationLine : public IsUpdateFieldStructureTag
{
    int32 ConversationLineID = 0;
    int32 BroadcastTextID = 0;
    uint32 StartTime = 0;
    struct StartTimeTag : ViewerDependentValueTag<uint32> {};
    int32 UiCameraID = 0;
    uint8 ActorIndex = 0;
    uint8 Flags = 0;
    uint8 ChatType = 0;

    void WriteCreate(ByteBuffer& data, Conversation const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Conversation const* owner, Player const* receiver) const;
    bool operator==(ConversationLine const& right) const;
    bool operator!=(ConversationLine const& right) const { return !(*this == right); }
};

struct ConversationActor : public IsUpdateFieldStructureTag
{
    uint32 CreatureID = 0;
    uint32 CreatureDisplayInfoID = 0;
    ObjectGuid ActorGUID;
    int32 Id = 0;
    uint32 Type = 0;
    uint32 NoActorObject = 0;

    void WriteCreate(ByteBuffer& data, Conversation const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Conversation const* owner, Player const* receiver) const;
    bool operator==(ConversationActor const& right) const;
    bool operator!=(ConversationActor const& right) const { return !(*this == right); }
};

struct ConversationData : public IsUpdateFieldStructureTag, public HasChangesMask<7>
{
    UpdateField<bool, 0, 1> DontPlayBroadcastTextSounds;
    UpdateField<std::vector<UF::ConversationLine>, 0, 2> Lines;
    DynamicUpdateField<UF::ConversationActor, 0, 3> Actors;
    UpdateField<int32, 0, 4> LastLineEndTime;
    struct LastLineEndTimeTag : ViewerDependentValueTag<int32> {};
    UpdateField<uint32, 0, 5> Progress;
    UpdateField<uint32, 0, 6> Flags;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Conversation const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Conversation const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, Conversation const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct MeshObjectData : public IsUpdateFieldStructureTag, public HasChangesMask<5>
{
    UpdateField<bool, 0, 1> IsWMO;
    UpdateField<bool, 0, 2> IsRoom;
    UpdateField<int32, 0, 3> FileDataID;
    OptionalUpdateField<AaBox, 0, 4> Geobox;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Object const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Object const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, Object const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct VendorData : public IsUpdateFieldStructureTag, public HasChangesMask<2>
{
    UpdateField<int32, 0, 1> Flags;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Creature const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Creature const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, Creature const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct DecorDyeSlots : public IsUpdateFieldStructureTag
{
    std::array<int32, 3> DyeColorID = {};

    void WriteCreate(ByteBuffer& data, BaseEntity const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, BaseEntity const* owner, Player const* receiver) const;
    bool operator==(DecorDyeSlots const& right) const;
    bool operator!=(DecorDyeSlots const& right) const { return !(*this == right); }
};

struct DecorStoragePersistedData : public IsUpdateFieldStructureTag, public HasChangesMask<4>
{
    UpdateField<ObjectGuid, -1, 0> HouseGUID;
    OptionalUpdateField<UF::DecorDyeSlots, -1, 1> DyeSlots;
    UpdateField<uint8, -1, 2> SourceType;
    UpdateField<std::string, -1, 3> SourceValue;

    void WriteCreate(ByteBuffer& data, BaseEntity const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, BaseEntity const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct HousingDecorData : public IsUpdateFieldStructureTag, public HasChangesMask<6>
{
    UpdateField<ObjectGuid, 0, 1> DecorGUID;
    UpdateField<ObjectGuid, 0, 2> AttachParentGUID;
    UpdateField<uint8, 0, 3> Flags;
    OptionalUpdateField<UF::DecorStoragePersistedData, 0, 4> PersistedData;
    UpdateField<ObjectGuid, 0, 5> TargetGameObjectGUID;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Object const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Object const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, Object const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct HousingDoorData : public IsUpdateFieldStructureTag, public HasChangesMask<5>
{
    UpdateField<int32, 0, 1> RoomComponentID;
    UpdateField<TaggedPosition<Position::XYZ>, 0, 2> RoomComponentOffset;
    UpdateField<uint8, 0, 3> RoomComponentType;
    UpdateField<ObjectGuid, 0, 4> AttachedRoomGUID;

    void WriteCreate(ByteBuffer& data, BaseEntity const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, BaseEntity const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct HousingRoomData : public IsUpdateFieldStructureTag, public HasChangesMask<7>
{
    DynamicUpdateField<ObjectGuid, 0, 1> MeshObjects;
    DynamicUpdateField<UF::HousingDoorData, 0, 2> Doors;
    UpdateField<ObjectGuid, 0, 3> HouseGUID;
    UpdateField<int32, 0, 4> HouseRoomID;
    UpdateField<int32, 0, 5> Flags;
    UpdateField<int32, 0, 6> FloorIndex;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, BaseEntity const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, BaseEntity const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, BaseEntity const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct HousingRoomComponentMeshData : public IsUpdateFieldStructureTag, public HasChangesMask<10>
{
    UpdateField<ObjectGuid, 0, 1> RoomGUID;
    UpdateField<int32, 0, 2> RoomComponentOptionID;
    UpdateField<int32, 0, 3> RoomComponentID;
    UpdateField<uint8, 0, 4> Field_20;
    UpdateField<uint8, 0, 5> RoomComponentType;
    UpdateField<int32, 0, 6> Field_24;
    UpdateField<int32, 0, 7> HouseThemeID;
    UpdateField<int32, 0, 8> RoomComponentTextureID;
    UpdateField<int32, 0, 9> RoomComponentTypeParam;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Object const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Object const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, Object const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct HousingPlayerHouseData : public IsUpdateFieldStructureTag, public HasChangesMask<10>
{
    UpdateField<ObjectGuid, 0, 1> BnetAccount;
    UpdateField<int32, 0, 2> PlotIndex;
    UpdateField<uint32, 0, 3> Level;
    UpdateField<uint64, 0, 4> Favor;
    UpdateField<uint32, 0, 5> InteriorDecorPlacementBudget;
    UpdateField<uint32, 0, 6> ExteriorDecorPlacementBudget;
    UpdateField<uint32, 0, 7> ExteriorFixtureBudget;
    UpdateField<uint32, 0, 8> RoomPlacementBudget;
    UpdateField<ObjectGuid, 0, 9> EntityGUID;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, BaseEntity const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, BaseEntity const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, BaseEntity const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct HousingCornerstoneData : public IsUpdateFieldStructureTag, public HasChangesMask<3>
{
    UpdateField<uint64, 0, 1> Cost;
    UpdateField<int32, 0, 2> PlotIndex;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, GameObject const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, GameObject const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, GameObject const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct HousingPlotAreaTriggerData : public IsUpdateFieldStructureTag, public HasChangesMask<5>
{
    UpdateField<uint32, 0, 1> PlotID;                                           // PlotIndex, not id from NeighborhoodPlot.db2
    UpdateField<ObjectGuid, 0, 2> HouseOwnerGUID;
    UpdateField<ObjectGuid, 0, 3> HouseGUID;
    UpdateField<ObjectGuid, 0, 4> HouseOwnerBnetAccountGUID;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, AreaTrigger const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, AreaTrigger const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, AreaTrigger const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct PlayerHouseInfo : public IsUpdateFieldStructureTag
{
    ObjectGuid HouseGUID;
    ObjectGuid OwnerGUID;

    void WriteCreate(ByteBuffer& data, BaseEntity const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, BaseEntity const* owner, Player const* receiver) const;
    bool operator==(PlayerHouseInfo const& right) const;
    bool operator!=(PlayerHouseInfo const& right) const { return !(*this == right); }
};

struct HousingOwner : public IsUpdateFieldStructureTag
{
    ObjectGuid BnetAccountGUID;
    ObjectGuid PlayerGUID;

    void WriteCreate(ByteBuffer& data, BaseEntity const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, BaseEntity const* owner, Player const* receiver) const;
    bool operator==(HousingOwner const& right) const;
    bool operator!=(HousingOwner const& right) const { return !(*this == right); }
};

struct NeighborhoodMirrorData : public IsUpdateFieldStructureTag, public HasChangesMask<5>
{
    DynamicUpdateField<UF::PlayerHouseInfo, 0, 1> Houses;
    DynamicUpdateField<UF::HousingOwner, 0, 2> Managers;
    UpdateField<ObjectGuid, 0, 4> OwnerGUID;
    UpdateField<std::string, 0, 3> Name;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, BaseEntity const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, BaseEntity const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, BaseEntity const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct MirroredMeshObjectData : public IsUpdateFieldStructureTag, public HasChangesMask<6>
{
    UpdateField<ObjectGuid, 0, 1> AttachParentGUID;
    UpdateField<TaggedPosition<Position::XYZ>, 0, 2> PositionLocalSpace;
    UpdateField<QuaternionData, 0, 3> RotationLocalSpace;
    UpdateField<float, 0, 4> ScaleLocalSpace;
    UpdateField<uint8, 0, 5> AttachmentFlags;

    void WriteCreate(ByteBuffer& data, BaseEntity const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, BaseEntity const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct MirroredPositionData : public IsUpdateFieldStructureTag, public HasChangesMask<2>
{
    UpdateField<UF::MirroredMeshObjectData, 0, 1> PositionData;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, BaseEntity const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, BaseEntity const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, BaseEntity const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct PlayerMirrorHouse : public IsUpdateFieldStructureTag
{
    ObjectGuid Guid;
    ObjectGuid NeighborhoodGUID;
    uint32 Level = 0;
    uint32 Favor = 0;
    uint32 InitiativeFavor = 0;
    int32 InitiativeCycleID = 0;
    int32 MapID = 0;
    int32 PlotID = 0;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(PlayerMirrorHouse const& right) const;
    bool operator!=(PlayerMirrorHouse const& right) const { return !(*this == right); }
};

struct NeighborhoodCharterSignature : public IsUpdateFieldStructureTag
{
    ObjectGuid Guid;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(NeighborhoodCharterSignature const& right) const;
    bool operator!=(NeighborhoodCharterSignature const& right) const { return !(*this == right); }
};

struct NeighborhoodCharter : public IsUpdateFieldStructureTag
{
    std::vector<UF::NeighborhoodCharterSignature> Signatures;
    int32 Field_0 = 0;
    int32 Field_4 = 0;
    std::string Name;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(NeighborhoodCharter const& right) const;
    bool operator!=(NeighborhoodCharter const& right) const { return !(*this == right); }
};

struct NeighborhoodOwnershipTransfer : public IsUpdateFieldStructureTag
{
    ObjectGuid NeighborhoodGUID;
    ObjectGuid CurrentOwnerGUID;
    std::string NeighborhoodName;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(NeighborhoodOwnershipTransfer const& right) const;
    bool operator!=(NeighborhoodOwnershipTransfer const& right) const { return !(*this == right); }
};

struct PlayerHouseInfoComponentData : public IsUpdateFieldStructureTag, public HasChangesMask<9>
{
    DynamicUpdateField<ObjectGuid, 0, 1> Field_8;
    DynamicUpdateField<UF::PlayerMirrorHouse, 0, 2> Houses;
    DynamicUpdateField<ObjectGuid, 0, 3> Field_88;
    DynamicUpdateField<ObjectGuid, 0, 4> Field_C0;
    DynamicUpdateField<ObjectGuid, 0, 5> Field_F8;
    UpdateField<UF::NeighborhoodCharter, 0, 6> Charter;
    UpdateField<uint8, 0, 7> Field_178;
    UpdateField<UF::NeighborhoodOwnershipTransfer, 0, 8> NeighborhoodOwnershipTransfer;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, Player const* owner, Player const* receiver) const;
    static void AppendAllowedFieldsMaskForFlag(Mask& allowedMaskForTarget, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags);
    static void FilterDisallowedFieldsMaskForFlag(Mask& changesMask, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags);
    void ClearChangesMask();
};

struct HousingStorageData : public IsUpdateFieldStructureTag, public HasChangesMask<3>
{
    MapUpdateField<ObjectGuid, UF::DecorStoragePersistedData, 0, 1> Decor;
    UpdateField<uint32, 0, 2> DecorMaxOwnedCount;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, BaseEntity const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, BaseEntity const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, BaseEntity const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct HousingFixtureData : public IsUpdateFieldStructureTag, public HasChangesMask<11>
{
    UpdateField<int32, 0, 1> ExteriorComponentID;
    UpdateField<int32, 0, 2> HouseExteriorWmoDataID;
    UpdateField<int32, 0, 3> ExteriorComponentHookID;
    UpdateField<ObjectGuid, 0, 4> HouseGUID;
    UpdateField<ObjectGuid, 0, 5> AttachParentGUID;
    UpdateField<ObjectGuid, 0, 6> Guid;
    UpdateField<ObjectGuid, 0, 7> GameObjectGUID;
    UpdateField<uint8, 0, 8> ExteriorComponentType;
    UpdateField<uint8, 0, 9> Field_59;
    UpdateField<uint8, 0, 10> Size;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Object const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Object const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, Object const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct PlayerInitiativeInfo : public IsUpdateFieldStructureTag, public HasChangesMask<7>
{
    UpdateField<int64, -1, 0> RemainingDuration;
    UpdateField<int32, -1, 1> CurrentInitiativeID;
    UpdateField<int32, -1, 2> CurrentMilestoneID;
    UpdateField<int32, -1, 3> CurrentCycleID;
    UpdateField<float, -1, 4> ProgressRequired;
    UpdateField<float, -1, 5> CurrentProgress;
    UpdateField<float, -1, 6> PlayerTotalContribution;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct PlayerInitiativeTaskInfo : public IsUpdateFieldStructureTag, public HasChangesMask<2>
{
    UpdateField<int32, -1, 0> TaskID;
    UpdateField<int32, -1, 1> TimesCompleted;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    void ClearChangesMask();
};

struct NICompletedMilestoneEntry : public IsUpdateFieldStructureTag
{
    uint32 MilestoneID = 0;
    int64 AwardDate = 0;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(NICompletedMilestoneEntry const& right) const;
    bool operator!=(NICompletedMilestoneEntry const& right) const { return !(*this == right); }
};

struct NICompletedInitiativesEntry : public IsUpdateFieldStructureTag
{
    bool Completed = false;
    std::vector<UF::NICompletedMilestoneEntry> CompletedMilestones;
    uint32 InitiativeID = 0;

    void WriteCreate(ByteBuffer& data, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, bool ignoreChangesMask, Player const* owner, Player const* receiver) const;
    bool operator==(NICompletedInitiativesEntry const& right) const;
    bool operator!=(NICompletedInitiativesEntry const& right) const { return !(*this == right); }
};

struct PlayerInitiativeComponentData : public IsUpdateFieldStructureTag, public HasChangesMask<6>
{
    DynamicUpdateField<UF::PlayerInitiativeTaskInfo, 0, 1> CompletedTasks;
    DynamicUpdateField<UF::NICompletedInitiativesEntry, 0, 2> CompletedInitiatives;
    UpdateField<ObjectGuid, 0, 3> NeighborhoodGUID;
    UpdateField<UF::PlayerInitiativeInfo, 0, 4> InitiativeInfo;
    SetUpdateField<ObjectGuid, 0, 5> Houses;

    void WriteCreate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags, Player const* owner, Player const* receiver) const;
    void WriteUpdate(ByteBuffer& data, Mask const& changesMask, bool ignoreNestedChangesMask, Player const* owner, Player const* receiver) const;
    static void AppendAllowedFieldsMaskForFlag(Mask& allowedMaskForTarget, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags);
    static void FilterDisallowedFieldsMaskForFlag(Mask& changesMask, EnumFlag<UpdateFieldFlag> fieldVisibilityFlags);
    void ClearChangesMask();
};

}

#endif // TRINITYCORE_UPDATE_FIELDS_H
