/*
 * Copyright 2023 AzgathCore
 *
 * This program is free software; you can redistribute it and/or modify it
 * under the terms of the GNU General Public License as published by the
 * Free Software Foundation; either version 2 of the License, or (at your
 * option) any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE. See the GNU General Public License for
 * more details.
 *
 * You should have received a copy of the GNU General Public License along
 * with this program. If not, see <http://www.gnu.org/licenses/>.
 */

#include "siege_of_orgrimmar.hpp"
#include "SpellAuraEffects.h"
#include "SpellMgr.h"

enum ScriptedTextRookStonetoe
{
    SAY_ROOK_AGGRO = 0,
    SAY_ROOK_DEATH = 1,
    SAY_ROOK_INTRO_1 = 2,
    SAY_ROOK_INTRO_2 = 3,
    SAY_ROOK_INTRO_3 = 4,
    SAY_ROOK_KILL = 5,
    SAY_ROOK_KICK = 6,
    SAY_ROOK_MEASURES = 7,
    SAY_ROOK_LOTUS = 8,
};

enum ScriptedTextHeSoftfoot
{
    SAY_HE_AGGRO = 0,
    SAY_HE_MEASURES = 1,
    SAY_HE_LOTUS = 2,
};

enum ScriptedTextSunTenderHeart
{
    SAY_SUN_AGGRO = 0,
    SAY_SUN_DEATH = 1,
    SAY_SUN_INTRO_1 = 2,
    SAY_SUN_KILL = 3,
    SAY_SUN_RESET = 4,
    SAY_SUN_CALAMITY = 5,
    SAY_SUN_MEASURES = 6,
    SAY_SUN_LOTUS = 7,
};

enum Spells
{
    SPELL_ZERO_POWER = 96301,
    SPELL_BOND_OF_THE_GOLDEN_LOTUS = 143497,
    SPELL_BERSERK = 26662,

    // Rook Stonetoe
    SPELL_VENGEFUL_STRIKES = 144396,
    SPELL_VENGEFUL_STRIKES_DMG = 144397,

    SPELL_CORRUPTED_BREW_AOE = 143019,
    SPELL_CORRUPTED_BREW_MISSILE_1 = 143021,
    SPELL_CORRUPTED_BREW_MISSILE_2 = 145608,
    SPELL_CORRUPTED_BREW_MISSILE_3 = 145609,
    SPELL_CORRUPTED_BREW_MISSILE_4 = 145610,
    SPELL_CORRUPTED_BREW_MISSILE_5 = 145611,
    SPELL_CORRUPTED_BREW_MISSILE_6 = 145612,
    SPELL_CORRUPTED_BREW_MISSILE_7 = 145615,
    SPELL_CORRUPTED_BREW_MISSILE_8 = 145617,
    SPELL_CORRUPTED_BREW_DMG = 143023,
    SPELL_CORRUPTED_BREW_DUMMY = 145605, // ?

    SPELL_CLASH_AOE = 143027,
    SPELL_CLASH_JUMP = 143028, // creature
    SPELL_CLASH_CHARGE = 143030, // player

    SPELL_CORRUPTION_KICK = 143007,
    SPELL_CORRUPTION_DMG = 143009,
    SPELL_CORRUPTION_PERIODIC = 143010,

    SPELL_MISERY_SORROW_AND_GLOOM = 143955,
    SPELL_MISERY_SORROW_AND_GLOOM_JUMP_1 = 143946,
    SPELL_MISERY_SORROW_AND_GLOOM_JUMP_2 = 143948,
    SPELL_MISERY_SORROW_AND_GLOOM_JUMP_3 = 143949,

    SPELL_SHARED_TORMENT = 145655,

    SPELL_DEFILED_GROUND = 143961,
    SPELL_DEFILED_GROUND_AREATRIGGER = 143960,
    SPELL_DEFILED_GROUND_AURA = 143959,

    SPELL_INFERNO_STRIKE = 143962,
    SPELL_RESIDUAL_BURN = 144007,

    SPELL_CORRUPTION_SHOCK_AOE = 143958,
    SPELL_CORRUPTION_SHOCK_DMG = 144018,

    // He StoneFoot
    SPELL_SHADOWSTEP_DUMMY = 143262,
    SPELL_SHADOWSTEP = 143048,
    SPELL_SHADOWSTEP_BACK = 143267,
    SPELL_GARROTE = 143198,

    SPELL_GOUGE = 143330,
    SPELL_GOUGE_DMG = 143301,
    SPELL_GOUGE_KNOCKBACK = 143331,

    SPELL_NOXIOUS_POISON = 143225,
    SPELL_NOXIOUS_POISON_AREATRIGGER = 143235,
    SPELL_NOXIOUS_POISON_MISSILE_1 = 143245,
    SPELL_NOXIOUS_POISON_MISSILE_2 = 143276,
    SPELL_NOXIOUS_POISON_AURA = 143239, // dmg
    SPELL_NOXIOUS_POISON_DMG = 144367,

    SPELL_INSTANT_POISON = 143210,
    SPELL_INSTANT_POISON_DMG = 143224,

    SPELL_MARK_OF_ANGUISH_JUMP = 143808,
    SPELL_MARK_OF_ANGUISH_AURA_1 = 143812, // on boss, visual
    SPELL_MARK_OF_ANGUISH_AOE = 143822, // targetting, is used to set next target for embodied anguish
    SPELL_MARK_OF_ANGUISH_AURA_2 = 143840, // on players, main aura (root, override spells)
    SPELL_MARK_OF_ANGUISH_DUMMY = 143842, // casted by a player to send the mark to another player
    SPELL_MARK_OF_ANGUISH_DMG = 144365, // is triggered by 143840 periodically, it damages the owner
    SPELL_SHADOW_WEAKNESS = 144079, // ?
    SPELL_SHADOW_WEAKNESS_AOE = 144081, // targetting to apply 144176 on players
    SPELL_SHADOW_WEAKNESS_DEBUFF = 144176,
    SPELL_DEBILITATION = 147383,

    // Sun TenderHeart
    SPELL_SHA_SEAR = 143423,
    SPELL_SHA_SEAR_DMG = 143424,

    SPELL_SHADOW_WORD_BANE = 143446, ///< Boss cast this
    SPELL_SHADOW_WORD_BANE_AOE = 143438, ///< Jump spell
    SPELL_SHADOW_WORD_BANE_DMG = 143434, ///< Damage aura

    SPELL_CALAMITY = 143491,
    SPELL_CALAMITY_DMG = 143493,
    SPELL_CALAMITY_DUMMY = 143544, // ?

    SPELL_DARK_MEDITATION_AREATRIGGER = 143546,
    SPELL_MEDITATIVE_FIELD = 143564,
    SPELL_DARK_MEDITATION_DUMMY_1 = 143649, // ? no visual
    SPELL_DARK_MEDITATION_JUMP_1 = 143728, // ? for adds ?
    SPELL_DARK_MEDITATION_JUMP_2 = 143730, // ? for adds ?
    SPELL_DARK_MEDITATION_PERIODIC = 143745,
    SPELL_DARK_MEDITATION_DUMMY_2 = 143843, // for boss
    SPELL_DARK_MEDITATION_DMG = 143559,

    SPELL_MANIFEST_DESPAIR = 143746,
    SPELL_MANIFEST_DESPERATION = 144504,

    SPELL_SPIRIT_BOUND = 143724,
};

enum Adds
{
    NPC_EMBODIED_MISERY = 71476,
    NPC_EMBODIED_SORROW = 71481,
    NPC_EMBODIED_GLOOM = 71477,

    NPC_EMBODIED_ANGUISH = 71478,

    NPC_EMBODIED_DESPAIR = 71474,
    NPC_EMBODIED_DESPERATION = 71482,
    NPC_DESPAIR_SPAWN = 71712,
    NPC_DESPERATION_SPAWN = 71993,
};

enum Events
{
    EVENT_BOND_OF_GOLDEN_LOTUS_END = 1,
    EVENT_BERSERK,

    EVENT_VENGEFUL_STRIKES,
    EVENT_CORRUPTED_BREW,
    EVENT_CLASH,

    EVENT_AGGRO,
    EVENT_DEFILED_GROUND,
    EVENT_INFERNO_STRIKE,
    EVENT_CORRUPTION_SHOCK,

    EVENT_GOUGE,
    EVENT_SHADOWSTEP,
    EVENT_SHADOWSTEP_BACK,
    EVENT_RESET_REACT_STATE,
    EVENT_POISON,

    EVENT_MARK_OF_ANGUISH,
    EVENT_MARK_OF_ANGUISH_TARGET_CHANGED,
    EVENT_CHECK_MARK_OF_ANGUISH_TARGET,

    EVENT_SHA_SEAR,
    EVENT_CALAMITY,
    EVENT_SHADOW_WORD_BANE,
    EVENT_DARK_MEDITATION,
    EVENT_DARK_MEDITATION_DMG,
    EVENT_MANIFEST,
};

enum Timers
{
    TIMER_BERSERK = 10 * MINUTE * IN_MILLISECONDS,
    TIMER_EVADE_CHECK = 5 * IN_MILLISECONDS,
};

enum Actions
{
    DATA_CASTING_LOW_HEALTH = 1,
    GUID_MARK_OF_ANGUISH,
    ACTION_OTHER_BOSS_BEGINS_MEASURES,
    ACTION_OTHER_BOSS_ENDS_MEASURES,
    DATA_ABILITY_COUNT,
    ACTION_PREPARE_SHADOWSTEP_BACK,

    /// Rook Stonetoe
    ACTION_VENGEFUL_STRIKES_FAILED,

    ACTION_SPAWNS_SYNC_HP,
};

enum Guids
{
    GUID_FIXATE_TARGET = 1
};

const Position embodiedStonetoePos[6] =
{
    { 1201.225f, 1018.279f, 452.1667f, 0.04791985f }, // Embodied Misery in air
    { 1201.64f, 1009.629f, 452.1667f, 0.04791985f },  // Embodied Sorrow in air
    { 1208.924f, 1014.313f, 452.1667f, 0.04791985f }, // Embodied Gloom in air
    { 1203.12f, 1011.185f, 418.1869f, 1.138274f },    // Embodied Misery on ground
    { 1228.698f, 1038.337f, 418.0633f, 3.502512f },   // Embodied Sorrowon ground
    { 1195.622f, 1037.929f, 418.0638f, 5.916756f }    // Embodied Gloom on ground
};

const Position embodiedDespairPos = { 1205.122f, 1007.743f, 418.0642f, 1.267296f };
const Position embodiedDesperationPos = { 1220.946f, 1055.802f, 417.523224f, 4.353518f };

void AddSC_boss_fallen_protectors()
{
    
}
